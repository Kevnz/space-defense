(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";!function(t){function e(t,i){var o,n,s,r,a,h=1,l=!0;if("boolean"==typeof t&&(l=t,h=2),o=i)for(n in o)i=t[n],s=o[n],t!==s&&(l&&("object"==typeof s||(r="[object Array]"===Object.prototype.toString.call(s)))?(r?(r=!1,a=i&&"[object Array]"===Object.prototype.toString.call(i)?i:[]):a=i&&"object"==typeof i?i:{},t[n]=e(a,s)):"undefined"!=typeof s&&(t[n]=s));return t}var i=([].slice,{}.hasOwnProperty),o=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};t.GameController={options:{left:{type:"dpad",position:{left:"13%",bottom:"22%"},dpad:{up:{width:"7%",height:"15%",stroke:2,touchStart:function(){GameController.simulateKeyEvent("press",38),GameController.simulateKeyEvent("down",38)},touchEnd:function(){GameController.simulateKeyEvent("up",38)}},left:{width:"15%",height:"7%",stroke:2,touchStart:function(){GameController.simulateKeyEvent("press",37),GameController.simulateKeyEvent("down",37)},touchEnd:function(){GameController.simulateKeyEvent("up",37)}},down:{width:"7%",height:"15%",stroke:2,touchStart:function(){GameController.simulateKeyEvent("press",40),GameController.simulateKeyEvent("down",40)},touchEnd:function(){GameController.simulateKeyEvent("up",40)}},right:{width:"15%",height:"7%",stroke:2,touchStart:function(){GameController.simulateKeyEvent("press",39),GameController.simulateKeyEvent("down",39)},touchEnd:function(){GameController.simulateKeyEvent("up",39)}}},joystick:{radius:60,touchMove:function(){}}},right:{type:"buttons",position:{right:"17%",bottom:"28%"},buttons:[{offset:{x:"-13%",y:0},label:"X",radius:"7%",stroke:2,backgroundColor:"blue",fontColor:"#fff",touchStart:function(){GameController.simulateKeyEvent("press",38),GameController.simulateKeyEvent("down",38)},touchEnd:function(){GameController.simulateKeyEvent("up",38)}},{offset:{x:0,y:"-11%"},label:"Y",radius:"7%",stroke:2,backgroundColor:"yellow",fontColor:"#fff"},{offset:{x:"13%",y:0},label:"B",radius:"7%",stroke:2,backgroundColor:"red",fontColor:"#fff",touchStart:function(){GameController.simulateKeyEvent("press",32),GameController.simulateKeyEvent("down",32),GameController.simulateKeyEvent("press",40),GameController.simulateKeyEvent("down",40)},touchEnd:function(){GameController.simulateKeyEvent("up",32),GameController.simulateKeyEvent("up",40)}},{offset:{x:0,y:"11%"},label:"A",radius:"7%",stroke:2,backgroundColor:"green",fontColor:"#fff",touchStart:function(){GameController.simulateKeyEvent("press",38),GameController.simulateKeyEvent("down",38)},touchEnd:function(){GameController.simulateKeyEvent("up",38)}}],dpad:{up:{width:"7%",height:"15%",stroke:2},left:{width:"15%",height:"7%",stroke:2},down:{width:"7%",height:"15%",stroke:2},right:{width:"15%",height:"7%",stroke:2}},joystick:{radius:60,touchMove:function(){}}},touchRadius:45},touchableAreas:[],touches:[],cachedSprites:{},paused:!1,init:function(t){if(!(!1 in document.documentElement)){t=t||{},e(this.options,t);var i;this.options.canvas&&(i=document.getElementById(this.options.canvas))?i&&(this.options.canvas=i):this.options.canvas=document.getElementsByTagName("canvas")[0],this.options.ctx=this.options.canvas.getContext("2d"),this.createOverlayCanvas()}},createOverlayCanvas:function(){this.canvas=document.createElement("canvas"),this.resize(!0),document.getElementsByTagName("body")[0].appendChild(this.canvas),this.ctx=this.canvas.getContext("2d");var t=this;window.addEventListener("resize",function(){setTimeout(function(){GameController.resize.call(t)},1)}),this.setTouchEvents(),this.loadSide("left"),this.loadSide("right"),this.render(),this.touches&&0!=this.touches.length||(this.paused=!0)},pixelRatio:1,resize:function(t){this.canvas.width=this.options.canvas.width,this.canvas.height=this.options.canvas.height,this.options.canvas.style.width&&this.options.canvas.style.height&&-1!==this.options.canvas.style.height.indexOf("px")&&(this.canvas.style.width=this.options.canvas.style.width,this.canvas.style.height=this.options.canvas.style.height,this.pixelRatio=this.canvas.width/parseInt(this.canvas.style.width)),this.canvas.style.position="absolute",this.canvas.style.left=this.options.canvas.offsetLeft+"px",this.canvas.style.top=this.options.canvas.offsetTop+"px",this.canvas.setAttribute("style",this.canvas.getAttribute("style")+" -ms-touch-action: none;"),t||(this.touchableAreas=[],this.cachedSprites=[],this.reloadSide("left"),this.reloadSide("right"))},getPixels:function(t,e){return"undefined"==typeof t?0:"number"==typeof t?t:"x"==e?parseInt(t)/100*this.canvas.width:parseInt(t)/100*this.canvas.height},simulateKeyEvent:function(t,e){if("undefined"==typeof window.onkeydown)return!1;if(jQuery){var i=jQuery.Event("key"+t);return i.ctrlKey=!1,i.which=e,void $(document).trigger(i)}var o=document.createEvent("KeyboardEvent");-1!==navigator.userAgent.toLowerCase().indexOf("chrome")&&(Object.defineProperty(o,"keyCode",{get:function(){return this.keyCodeVal}}),Object.defineProperty(o,"which",{get:function(){return this.keyCodeVal}})),o.initKeyboardEvent?o.initKeyboardEvent("key"+t,!0,!0,document.defaultView,!1,!1,!1,!1,e,e):o.initKeyEvent("key"+t,!0,!0,document.defaultView,!1,!1,!1,!1,e,e),o.keyCodeVal=e},setTouchEvents:function(){var t=this,e=function(e){t.paused&&(t.paused=!1),e.preventDefault(),window.navigator.msPointerEnabled&&e.clientX&&e.pointerType==e.MSPOINTER_TYPE_TOUCH?t.touches[e.pointerId]={clientX:e.clientX,clientY:e.clientY}:t.touches=e.touches||[]};this.canvas.addEventListener("touchstart",e,!1);var i=function(e){e.preventDefault(),window.navigator.msPointerEnabled&&e.pointerType==e.MSPOINTER_TYPE_TOUCH?delete t.touches[e.pointerId]:t.touches=e.touches||[],e.touches&&0!=e.touches.length||(t.render(),t.paused=!0)};this.canvas.addEventListener("touchend",i);var o=function(e){e.preventDefault(),window.navigator.msPointerEnabled&&e.clientX&&e.pointerType==e.MSPOINTER_TYPE_TOUCH?t.touches[e.pointerId]={clientX:e.clientX,clientY:e.clientY}:t.touches=e.touches||[]};this.canvas.addEventListener("touchmove",o),window.navigator.msPointerEnabled&&(this.canvas.addEventListener("MSPointerDown",e),this.canvas.addEventListener("MSPointerUp",i),this.canvas.addEventListener("MSPointerMove",o))},addTouchableDirection:function(t){var e=new s(t);e.id=this.touchableAreas.push(e)},addJoystick:function(t){var e=new a(t);e.id=this.touchableAreas.push(e)},addButton:function(t){var e=new r(t);e.id=this.touchableAreas.push(e)},addTouchableArea:function(){},loadButtons:function(t){for(var e=this.options[t].buttons,i=0,o=e.length;o>i;i++){var n=this.getPositionX(t),s=this.getPositionY(t);e[i].x=n+this.getPixels(e[i].offset.x,"y"),e[i].y=s+this.getPixels(e[i].offset.y,"y"),this.addButton(e[i])}},loadDPad:function(t){var e=this.options[t].dpad||{},i=this.getPositionX(t),o=this.getPositionY(t);if(e.up&&e.left&&e.down&&e.right){var n={x:i,y:o,radius:e.right.height},s=new h(n);this.touchableAreas.push(s)}e.up!==!1&&(e.up.x=i-this.getPixels(e.up.width,"y")/2,e.up.y=o-(this.getPixels(e.up.height,"y")+this.getPixels(e.left.height,"y")/2),e.up.direction="up",this.addTouchableDirection(e.up)),e.left!==!1&&(e.left.x=i-(this.getPixels(e.left.width,"y")+this.getPixels(e.up.width,"y")/2),e.left.y=o-this.getPixels(e.left.height,"y")/2,e.left.direction="left",this.addTouchableDirection(e.left)),e.down!==!1&&(e.down.x=i-this.getPixels(e.down.width,"y")/2,e.down.y=o+this.getPixels(e.left.height,"y")/2,e.down.direction="down",this.addTouchableDirection(e.down)),e.right!==!1&&(e.right.x=i+this.getPixels(e.up.width,"y")/2,e.right.y=o-this.getPixels(e.right.height,"y")/2,e.right.direction="right",this.addTouchableDirection(e.right))},loadJoystick:function(t){var e=this.options[t].joystick;e.x=this.getPositionX(t),e.y=this.getPositionY(t),this.addJoystick(e)},reloadSide:function(t){this.loadSide(t)},loadSide:function(t){"dpad"===this.options[t].type?this.loadDPad(t):"joystick"===this.options[t].type?this.loadJoystick(t):"buttons"===this.options[t].type&&this.loadButtons(t)},normalizeTouchPositionX:function(t){return(t-GameController.options.canvas.offsetLeft+document.body.scrollLeft)*this.pixelRatio},normalizeTouchPositionY:function(t){return(t-GameController.options.canvas.offsetTop+document.body.scrollTop)*this.pixelRatio},getXFromRight:function(t){return this.canvas.width-t},getYFromBottom:function(t){return this.canvas.height-t},getPositionX:function(t){return"undefined"!=typeof this.options[t].position.left?this.getPixels(this.options[t].position.left,"x"):this.getXFromRight(this.getPixels(this.options[t].position.right,"x"))},getPositionY:function(t){return"undefined"!=typeof this.options[t].position.top?this.getPixels(this.options[t].position.top,"y"):this.getYFromBottom(this.getPixels(this.options[t].position.bottom,"y"))},render:function(){if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!this.paused){var t="touch-circle",e=GameController.cachedSprites[t];if(!e&&this.options.touchRadius){var i=document.createElement("canvas"),o=i.getContext("2d");i.width=2*this.options.touchRadius,i.height=2*this.options.touchRadius;var n=this.options.touchRadius,s=o.createRadialGradient(n,n,1,n,n,this.options.touchRadius);s.addColorStop(0,"rgba( 200, 200, 200, 1 )"),s.addColorStop(1,"rgba( 200, 200, 200, 0 )"),o.beginPath(),o.fillStyle=s,o.arc(n,n,this.options.touchRadius,0,2*Math.PI,!1),o.fill(),e=GameController.cachedSprites[t]=i}for(var r=0,a=this.touches.length;a>r;r++){var h=this.touches[r];if("undefined"!=typeof h){var l=this.normalizeTouchPositionX(h.clientX),c=this.normalizeTouchPositionY(h.clientY);this.ctx.drawImage(e,l-this.options.touchRadius,c-this.options.touchRadius)}}}for(var r=0,a=this.touchableAreas.length;a>r;r++){this.touchableAreas[r].draw();for(var d=this.touchableAreas[r],u=!1,p=0,f=this.touches.length;f>p;p++){var h=this.touches[p];if("undefined"!=typeof h){var l=this.normalizeTouchPositionX(h.clientX),c=this.normalizeTouchPositionY(h.clientY);d.check(l,c)!==!1&&(u||(u=this.touches[p]))}}u?(d.active||d.touchStartWrapper(u),d.touchMoveWrapper(u)):d.active&&d.touchEndWrapper(u)}window.requestAnimationFrame(this.renderWrapper)},renderWrapper:function(){GameController.render()}};var n=function(){function t(){}return t.prototype.touchStart=null,t.prototype.touchMove=null,t.prototype.touchEnd=null,t.prototype.type="area",t.prototype.id=!1,t.prototype.active=!1,t.prototype.setTouchStart=function(t){this.touchStart=t},t.prototype.touchStartWrapper=function(){this.touchStart&&this.touchStart(),this.active=!0},t.prototype.setTouchMove=function(t){this.touchMove=t},t.prototype.lastPosX=0,t.prototype.lastPosY=0,t.prototype.touchMoveWrapper=function(e){!this.touchMove||e.clientX==t.prototype.lastPosX&&e.clientY==t.prototype.lastPosY||(this.touchMove(),this.lastPosX=e.clientX,this.lastPosY=e.clientY),this.active=!0},t.prototype.setTouchEnd=function(t){this.touchEnd=t},t.prototype.touchEndWrapper=function(){this.touchEnd&&this.touchEnd(),this.active=!1,GameController.render()},t}(),s=function(t){function e(t){for(var e in t)this[e]="x"==e?GameController.getPixels(t[e],"x"):"y"==e||"height"==e||"width"==e?GameController.getPixels(t[e],"y"):t[e];this.draw()}return o(e,t),e.prototype.type="direction",e.prototype.check=function(t,e){return(Math.abs(t-this.x)<GameController.options.touchRadius/2||t>this.x)&&(Math.abs(t-(this.x+this.width))<GameController.options.touchRadius/2||t<this.x+this.width)&&(Math.abs(e-this.y)<GameController.options.touchRadius/2||e>this.y)&&(Math.abs(e-(this.y+this.height))<GameController.options.touchRadius/2||e<this.y+this.height)?!0:!1},e.prototype.draw=function(){var t=this.type+""+this.id+this.active,e=GameController.cachedSprites[t];if(!e){var i=document.createElement("canvas"),o=i.getContext("2d");i.width=this.width+2*this.stroke,i.height=this.height+2*this.stroke;var n=this.opacity||.9;switch(this.active||(n*=.5),this.direction){case"up":var s=o.createLinearGradient(0,0,0,this.height);s.addColorStop(0,"rgba( 0, 0, 0, "+.5*n+" )"),s.addColorStop(1,"rgba( 0, 0, 0, "+n+" )");break;case"left":var s=o.createLinearGradient(0,0,this.width,0);s.addColorStop(0,"rgba( 0, 0, 0, "+.5*n+" )"),s.addColorStop(1,"rgba( 0, 0, 0, "+n+" )");break;case"right":var s=o.createLinearGradient(0,0,this.width,0);s.addColorStop(0,"rgba( 0, 0, 0, "+n+" )"),s.addColorStop(1,"rgba( 0, 0, 0, "+.5*n+" )");break;case"down":default:var s=o.createLinearGradient(0,0,0,this.height);s.addColorStop(0,"rgba( 0, 0, 0, "+n+" )"),s.addColorStop(1,"rgba( 0, 0, 0, "+.5*n+" )")}o.fillStyle=s,o.fillRect(0,0,this.width,this.height),o.lineWidth=this.stroke,o.strokeStyle="rgba( 255, 255, 255, 0.1 )",o.strokeRect(0,0,this.width,this.height),e=GameController.cachedSprites[t]=i}GameController.ctx.drawImage(e,this.x,this.y)},e}(n),r=function(t){function e(t){for(var e in t)this[e]="x"==e?GameController.getPixels(t[e],"x"):"x"==e||"radius"==e?GameController.getPixels(t[e],"y"):t[e];this.draw()}return o(e,t),e.prototype.type="button",e.prototype.check=function(t,e){return Math.abs(t-this.x)<this.radius+GameController.options.touchRadius/2&&Math.abs(e-this.y)<this.radius+GameController.options.touchRadius/2?!0:!1},e.prototype.draw=function(){var t=this.type+""+this.id+this.active,e=GameController.cachedSprites[t];if(!e){var i=document.createElement("canvas"),o=i.getContext("2d");o.lineWidth=this.stroke,i.width=i.height=2*(this.radius+o.lineWidth);var n,s=o.createRadialGradient(this.radius,this.radius,1,this.radius,this.radius,this.radius);switch(this.backgroundColor){case"blue":s.addColorStop(0,"rgba(123, 181, 197, 0.6)"),s.addColorStop(1,"#105a78"),n="#0A4861";break;case"green":s.addColorStop(0,"rgba(29, 201, 36, 0.6)"),s.addColorStop(1,"#107814"),n="#085C0B";break;case"red":s.addColorStop(0,"rgba(165, 34, 34, 0.6)"),s.addColorStop(1,"#520101"),n="#330000";break;case"yellow":s.addColorStop(0,"rgba(219, 217, 59, 0.6)"),s.addColorStop(1,"#E8E10E"),n="#BDB600";break;case"white":default:s.addColorStop(0,"rgba( 255,255,255,.3 )"),s.addColorStop(1,"#eee")}o.fillStyle=this.active?n:s,o.strokeStyle=n,o.beginPath(),o.arc(i.width/2,i.width/2,this.radius,0,2*Math.PI,!1),o.fill(),o.stroke(),this.label&&(o.fillStyle=n,o.font="bold "+(this.fontSize||.35*i.height)+"px Verdana",o.textAlign="center",o.textBaseline="middle",o.fillText(this.label,i.height/2+2,i.height/2+2),o.fillStyle=this.fontColor,o.font="bold "+(this.fontSize||.35*i.height)+"px Verdana",o.textAlign="center",o.textBaseline="middle",o.fillText(this.label,i.height/2,i.height/2)),e=GameController.cachedSprites[t]=i}GameController.ctx.drawImage(e,this.x,this.y)},e}(n),a=function(t){function e(t){for(var e in t)this[e]=t[e];this.currentX=this.currentX||this.x,this.currentY=this.currentY||this.y}return o(e,t),e.prototype.type="joystick",e.prototype.check=function(t,e){return Math.abs(t-this.x)<this.radius+GameController.options.touchRadius/2&&Math.abs(e-this.y)<this.radius+GameController.options.touchRadius/2?!0:!1},e.prototype.moveDetails={},e.prototype.touchMoveWrapper=function(t){this.currentX=GameController.normalizeTouchPositionX(t.clientX),this.currentY=GameController.normalizeTouchPositionY(t.clientY),this.touchMove&&this.moveDetails.dx!=this.currentX-this.x&&this.moveDetails.dy!=this.y-this.currentY&&(this.moveDetails.dx=this.currentX-this.x,this.moveDetails.dy=this.y-this.currentY,this.moveDetails.max=this.radius+GameController.options.touchRadius/2,this.moveDetails.normalizedX=this.moveDetails.dx/this.moveDetails.max,this.moveDetails.normalizedY=this.moveDetails.dy/this.moveDetails.max,this.touchMove(this.moveDetails)),this.active=!0},e.prototype.draw=function(){if(!this.id)return!1;var t=this.type+""+this.id+this.active,e=GameController.cachedSprites[t];if(!e){var i=document.createElement("canvas");this.stroke=this.stroke||2,i.width=i.height=2*(this.radius+this.stroke);var o=i.getContext("2d");if(o.lineWidth=this.stroke,this.active){var n=o.createRadialGradient(0,0,1,0,0,this.radius);n.addColorStop(0,"rgba( 200,200,200,.5 )"),n.addColorStop(1,"rgba( 200,200,200,.9 )"),o.strokeStyle="#000"}else{var n=o.createRadialGradient(0,0,1,0,0,this.radius);n.addColorStop(0,"rgba( 200,200,200,.2 )"),n.addColorStop(1,"rgba( 200,200,200,.4 )"),o.strokeStyle="rgba( 0,0,0,.4 )"}o.fillStyle=n,o.beginPath(),o.arc(this.radius,this.radius,this.radius,0,2*Math.PI,!1),o.fill(),o.stroke(),e=GameController.cachedSprites[t]=i}GameController.ctx.fillStyle="#444",GameController.ctx.beginPath(),GameController.ctx.arc(this.x,this.y,.7*this.radius,0,2*Math.PI,!1),GameController.ctx.fill(),GameController.ctx.stroke(),GameController.ctx.drawImage(e,this.currentX-this.radius,this.currentY-this.radius)},e}(n),h=function(t){function e(t){for(var e in t)this[e]="x"==e?GameController.getPixels(t[e],"x"):"x"==e||"radius"==e?GameController.getPixels(t[e],"y"):t[e];this.draw()}return o(e,t),e.prototype.check=function(){return!1},e.prototype.draw=function(){GameController.ctx.fillStyle="rgba( 0, 0, 0, 0.5 )",GameController.ctx.beginPath(),GameController.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),GameController.ctx.fill()},e}(n);!function(){if("undefined"==typeof module){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+o)},o);return t=i+o,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}}()}("undefined"!=typeof module?module.exports:window);
//# sourceMappingURL=out.js.map

},{}],2:[function(require,module,exports){
"use strict";var globals={bullets:null,enemies:null,player:null},update=require("./game/update"),preload=require("./game/preload"),create=require("./game/create"),game=window.game=new Phaser.Game(800,600,Phaser.AUTO,"",{preload:preload,create:create,update:update});
//# sourceMappingURL=out.js.map

},{"./game/create":3,"./game/preload":5,"./game/update":7}],3:[function(require,module,exports){
"use strict";function resetBullet(e){e.kill()}function setupEnemy(e){e.anchor.x=.5,e.anchor.y=.5,e.animations.add("explode")}module.exports=function(){game.physics.startSystem(Phaser.Physics.ARCADE),this.spaceBG=this.add.tileSprite(0,0,800,600,"bg"),this.spaceBG.autoScroll(0,75),game.input.gamepad.start();var e=window.GameController=require("game-controller").GameController;e.init({left:{type:"joystick",joystick:{touchStart:function(){},touchMove:function(e){game.input.joystickLeft=e},touchEnd:function(){game.input.joystickLeft=null}}},right:{type:"none"}}),window.player=require("./player")(game),player.init();var t=window.bullets=this.add.group();t.enableBody=!0,t.physicsBodyType=Phaser.Physics.ARCADE,t.createMultiple(10,"bullets","bullet-green.png"),t.setAll("anchor.x",.5),t.setAll("anchor.y",1),t.setAll("outOfBoundsKill",!0),t.setAll("checkWorldBounds",!0),window.explosions=game.add.group(),explosions.createMultiple(30,"explode"),explosions.forEach(setupEnemy,this),window.music=game.add.audio("stage-1"),window.explosionsSmallest=game.add.group(),explosionsSmallest.createMultiple(30,"explode-smallest"),explosionsSmallest.forEach(setupEnemy,this),window.boom=game.add.audio("boom"),window.lazer=game.add.audio("lazer"),window.stage1=require("./scenes/scene-1")(game),stage1.init()};
//# sourceMappingURL=out.js.map

},{"./player":4,"./scenes/scene-1":6,"game-controller":1}],4:[function(require,module,exports){
"use strict";module.exports=function(t){function e(){if(t.time.now>s){var e=bullets.getFirstExists(!1);e&&(e.reset(i.x,i.y+16),e.body.velocity.y=-300,s=t.time.now+1e3)}if(t.time.now>n+20){var o=bullets.getFirstExists(!1);o&&(o.reset(i.x+26,i.y+16),o.body.velocity.y=-300,n=t.time.now+1e3)}}var i,o,s=0,n=0,y=200;return{init:function(){i=t.add.sprite(384,500,"ship"),t.physics.enable(i,Phaser.Physics.ARCADE),o=t.input.keyboard.createCursorKeys()},update:function(){o.up.isDown?o.up.shiftKey||i.y>350&&(i.y-=4):o.down.isDown&&(o.down.shiftKey||(i.y+=4)),o.left.isDown?i.x-=4:o.right.isDown&&(i.x+=4),t.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&e(),t.input.joystickLeft?i.body.velocity.setTo(200*t.input.joystickLeft.normalizedX,t.input.joystickLeft.normalizedY*y*-1):i.body.velocity.setTo(0,0)}}};
//# sourceMappingURL=out.js.map

},{}],5:[function(require,module,exports){
"use strict";module.exports=function(){this.load.atlas("bullets","img/assets/bullets.png","sheets/bullets"),this.load.image("blue_bullet","img/assets/blue-bullet.png"),this.load.image("bg","img/backgrounds/bg.png"),this.load.atlas("atlas","img/enemy-fighters/enemy-fighters.png","sheets/enemy-fighters"),this.load.atlas("bosses","img/enemy-bosses/enemy-bosses.png","sheets/bosses"),this.load.image("ship","img/space_ship_base.png"),this.load.spritesheet("explode","img/assets/explode.png",128,128),this.load.spritesheet("explode-small","img/assets/explode-small.png",32,32),this.load.spritesheet("explode-smallest","img/assets/explode-smallest.png",16,16),this.load.audio("boom",["audio/effects/explode.wav"]),this.load.audio("lazer",["audio/effects/lazer.wav"]),this.load.audio("stage-1",["audio/background/stage-1.mp3","audio/background/stage-1.ogg"])};
//# sourceMappingURL=out.js.map

},{}],6:[function(require,module,exports){
"use strict";module.exports=function(e){var s,t,n=function(){var s=e.rnd.integerInRange(40,600),t=e.rnd.integerInRange(0,10),n=aliens.create(s,t,"atlas","bad-guy1.png");n.anchor.setTo(.5,.5),n.body.moves=!0,n.body.velocity.setTo(0,100)},o=function(e,s){e.kill(),s.kill();var t=(s.body.x,s.body.y,explosions.getFirstExists(!1));t.reset(s.body.x,s.body.y),t.play("explode",30,!1,!0)},i=function(e,s){s.body.x,s.body.y;s.hitCount=s.hitCount-1;var t=explosionsSmallest.getFirstExists(!1);if(t.reset(e.body.x,e.body.y),e.kill(),t.play("explode-smallest",30,!1,!0),s.hitCount<=0){var n=explosions.getFirstExists(!1);n.reset(s.body.x,s.body.y),n.play("explode",30,!1,!0),s.kill()}},a=function(){var t=e.rnd.integerInRange(40,600),n=e.rnd.integerInRange(0,10),o=s.create(t,n,"atlas","raptor-1.png");o.anchor.setTo(.5,.5),o.body.moves=!0,o.body.velocity.setTo(0,150)},r=function(){var s=e.rnd.integerInRange(40,600),n=e.rnd.integerInRange(0,10),o=t.create(s,n,"bosses","boss-1.png");o.anchor.setTo(.5,.5),o.body.moves=!0,o.body.velocity.setTo(0,70),o.hitCount=5};return{init:function(){window.aliens=e.add.group(),aliens.enableBody=!0,aliens.physicsBodyType=Phaser.Physics.ARCADE,s=e.add.group(),s.enableBody=!0,s.physicsBodyType=Phaser.Physics.ARCADE,t=e.add.group(),t.enableBody=!0,t.physicsBodyType=Phaser.Physics.ARCADE,e.time.events.repeat(2*Phaser.Timer.SECOND,105,n,this),e.time.events.repeat(5*Phaser.Timer.SECOND,25,a,this),e.time.events.repeat(2*Phaser.Timer.SECOND,10,r,this)},update:function(){e.physics.arcade.overlap(bullets,aliens,o,null,this),e.physics.arcade.overlap(bullets,s,o,null,this),e.physics.arcade.overlap(bullets,t,i,null,this)},destroy:function(){}}};
//# sourceMappingURL=out.js.map

},{}],7:[function(require,module,exports){
"use strict";function resetBullet(e){e.kill()}var bulletTime=0,right_bulletTime=0,left_bulletTime=0;module.exports=function(){window.bullets,window.cursors;player.update(),stage1.update()};
//# sourceMappingURL=out.js.map

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxcbm9kZV9tb2R1bGVzXFxnYW1lLWNvbnRyb2xsZXJcXGdhbWVjb250cm9sbGVyLmpzIiwiQzpcXFVzZXJzXFxLZXZpblxcUHJvamVjdHNcXHNwYWNlLWRlZmVuc2VcXHB1YmxpY1xcanNcXGdhbWUuanMiLCJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxccHVibGljXFxqc1xcZ2FtZVxcY3JlYXRlLmpzIiwiQzpcXFVzZXJzXFxLZXZpblxcUHJvamVjdHNcXHNwYWNlLWRlZmVuc2VcXHB1YmxpY1xcanNcXGdhbWVcXHBsYXllci5qcyIsIkM6XFxVc2Vyc1xcS2V2aW5cXFByb2plY3RzXFxzcGFjZS1kZWZlbnNlXFxwdWJsaWNcXGpzXFxnYW1lXFxwcmVsb2FkLmpzIiwiQzpcXFVzZXJzXFxLZXZpblxcUHJvamVjdHNcXHNwYWNlLWRlZmVuc2VcXHB1YmxpY1xcanNcXGdhbWVcXHNjZW5lc1xcc2NlbmUtMS5qcyIsIkM6XFxVc2Vyc1xcS2V2aW5cXFByb2plY3RzXFxzcGFjZS1kZWZlbnNlXFxwdWJsaWNcXGpzXFxnYW1lXFx1cGRhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNHQSxjQUFBLFNBQVcsR0FLVixRQUFTLEdBQVEsRUFBUSxHQUV4QixHQUFJLEdBQVMsRUFBTSxFQUFNLEVBQWEsRUFDckMsRUFBSSxFQUVKLEdBQU8sQ0FjUCxJQVhxQixpQkFBWCxLQUVWLEVBQU8sRUFFUCxFQUFJLEdBU0QsRUFBVSxFQUdiLElBQUssSUFBUSxHQUVaLEVBQU0sRUFBTyxHQUNiLEVBQU8sRUFBUSxH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QUFNLE9BQWEsR0FBSSxFQUFhLE1BRTVELEVBQUksS0FBSyxPQUFPLE9BQThCLEVBQXRCLE9BQU0sTUFBTSxPQUFhLEdBQUksRUFBZSxPQUU5RSxPQUFTLFdBRVIsRUFBSSxRQUFRLE9BQU8sUUFBUyxRQUFTLE9BQVEsRUFBa0IsS0FBTSxNQUNyRSxFQUFJLFFBQVEsT0FBTyxRQUFTLFFBQVMsRUFBUyxFQUFrQixLQUFNLE1BQzdELEVBQUksUUFBUSxPQUFPLFFBQVMsUUFBUyxFQUFZLEVBQXNCLEtBQU0sT0FFdkYsUUFBUzs7OztBQ3hGWCxxQkFDVSxhQUFhLEdBRW5CLEVBQU0sT0FITixHQUFBLFlBQWEsRUFRVCxpQkFBbUIsRUFBRyxnQkFBa0IsQ0FFaEQsUUFBTSxRQUFZLFdBQ0EsT0FBTSxRQUdOLE9BQU0sT0FJcEIsUUFBTSxTQUVGLE9BQU0iLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxyXG4gKiBIZWxwZXJzIFxyXG4gKi9cclxuKCBmdW5jdGlvbihleHBvcnRzKSB7XHJcblx0dmFyIF9fc2xpY2UgPSBbXS5zbGljZTtcclxuXHR2YXIgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XHJcblx0dmFyIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xyXG5cdC8qICQuZXh0ZW5kIGZ1bmN0aW9uYWxpdHkgKi9cclxuXHRmdW5jdGlvbiBleHRlbmQoIHRhcmdldCwgc3JjIClcclxuXHR7XHJcblx0XHR2YXIgb3B0aW9ucywgbmFtZSwgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxyXG5cdFx0XHRpID0gMSxcclxuXHRcdFx0bGVuZ3RoID0gMixcclxuXHRcdFx0ZGVlcCA9IHRydWU7XHJcblx0XHJcblx0XHQvLyBIYW5kbGUgYSBkZWVwIGNvcHkgc2l0dWF0aW9uXHJcblx0XHRpZiggdHlwZW9mIHRhcmdldCA9PT0gXCJib29sZWFuXCIgKVxyXG5cdFx0e1xyXG5cdFx0XHRkZWVwID0gdGFyZ2V0O1xyXG5cdFx0XHQvLyBza2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XHJcblx0XHRcdGkgPSAyO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nKCBwb3NzaWJsZSBpbiBkZWVwIGNvcHkgKVxyXG5cdFx0aWYoIHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgIXR5cGVvZiB0YXJnZXQgPT09ICdmdW5jdGlvbicgKVxyXG5cdFx0e1xyXG5cdFx0XHR0YXJnZXQgPSB7fTtcclxuXHRcdH1cclxuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcclxuXHRcdGlmKCBvcHRpb25zID0gc3JjIClcclxuXHRcdHtcclxuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxyXG5cdFx0XHRmb3IoIG5hbWUgaW4gb3B0aW9ucyApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzcmMgPSB0YXJnZXRbbmFtZV07XHJcblx0XHRcdFx0Y29weSA9IG9wdGlvbnNbbmFtZV07XHJcblx0XHJcblx0XHRcdFx0Ly8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxyXG5cdFx0XHRcdGlmKCB0YXJnZXQgPT09IGNvcHkgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcclxuXHRcdFx0XHRpZiggZGVlcCAmJiggdHlwZW9mIGNvcHkgPT0gJ29iamVjdCcgfHwoIGNvcHlJc0FycmF5ID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCAgY29weSAgKSA9PT0gJ1tvYmplY3QgQXJyYXldJyApICkgKSBcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZiggY29weUlzQXJyYXkgKSBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCAgc3JjICApID09PSAnW29iamVjdCBBcnJheV0nID8gc3JjIDogW107XHJcblx0XHJcblx0XHRcdFx0XHR9IFxyXG5cdFx0XHRcdFx0ZWxzZSBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgdHlwZW9mIHNyYyA9PSAnb2JqZWN0JyA/IHNyYyA6IHt9O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXHJcblx0XHRcdFx0XHR0YXJnZXRbbmFtZV0gPSBleHRlbmQoIGNsb25lLCBjb3B5ICk7XHJcblx0XHJcblx0XHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXHJcblx0XHRcdFx0fSBcclxuXHRcdFx0XHRlbHNlIGlmKCB0eXBlb2YgY29weSAhPT0gJ3VuZGVmaW5lZCcgKSBcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0YXJnZXRbbmFtZV0gPSBjb3B5O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRhcmdldDtcclxuXHR9XHJcblx0XHJcblx0Ly8gTWFrZSBhdmFpbGFibGUgdG8gd2luZG93XHJcblx0ZXhwb3J0cy5HYW1lQ29udHJvbGxlciA9IHtcclxuXHRcdFxyXG5cdFx0Ly8gRGVmYXVsdCBvcHRpb25zLFxyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHRsZWZ0OiB7IFxyXG5cdFx0XHRcdHR5cGU6ICdkcGFkJywgXHJcblx0XHRcdFx0cG9zaXRpb246IHsgbGVmdDogJzEzJScsIGJvdHRvbTogJzIyJScgfSxcclxuXHRcdFx0XHRkcGFkOiB7XHJcblx0XHRcdFx0XHR1cDoge1xyXG5cdFx0XHRcdFx0XHR3aWR0aDogJzclJyxcclxuXHRcdFx0XHRcdFx0aGVpZ2h0OiAnMTUlJyxcclxuXHRcdFx0XHRcdFx0c3Ryb2tlOiAyLFxyXG5cdFx0XHRcdFx0XHR0b3VjaFN0YXJ0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAncHJlc3MnLCAzOCApO1xyXG5cdFx0XHRcdFx0XHRcdEdhbWVDb250cm9sbGVyLnNpbXVsYXRlS2V5RXZlbnQoICdkb3duJywgMzggKTtcclxuXHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0dG91Y2hFbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdEdhbWVDb250cm9sbGVyLnNpbXVsYXRlS2V5RXZlbnQoICd1cCcsIDM4ICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRsZWZ0OiB7XHJcblx0XHRcdFx0XHRcdHdpZHRoOiAnMTUlJyxcclxuXHRcdFx0XHRcdFx0aGVpZ2h0OiAnNyUnLFxyXG5cdFx0XHRcdFx0XHRzdHJva2U6IDIsXHJcblx0XHRcdFx0XHRcdHRvdWNoU3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdEdhbWVDb250cm9sbGVyLnNpbXVsYXRlS2V5RXZlbnQoICdwcmVzcycsIDM3ICk7XHJcblx0XHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ2Rvd24nLCAzNyApO1xyXG5cdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHR0b3VjaEVuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ3VwJywgMzcgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdGRvd246IHtcclxuXHRcdFx0XHRcdFx0d2lkdGg6ICc3JScsXHJcblx0XHRcdFx0XHRcdGhlaWdodDogJzE1JScsXHJcblx0XHRcdFx0XHRcdHN0cm9rZTogMixcclxuXHRcdFx0XHRcdFx0dG91Y2hTdGFydDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ3ByZXNzJywgNDAgKTtcclxuXHRcdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAnZG93bicsIDQwICk7XHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdHRvdWNoRW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAndXAnLCA0MCApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0cmlnaHQ6IHtcclxuXHRcdFx0XHRcdFx0d2lkdGg6ICcxNSUnLFxyXG5cdFx0XHRcdFx0XHRoZWlnaHQ6ICc3JScsXHJcblx0XHRcdFx0XHRcdHN0cm9rZTogMixcclxuXHRcdFx0XHRcdFx0dG91Y2hTdGFydDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ3ByZXNzJywgMzkgKTtcclxuXHRcdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAnZG93bicsIDM5ICk7XHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdHRvdWNoRW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAndXAnLCAzOSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRqb3lzdGljazoge1xyXG5cdFx0XHRcdFx0cmFkaXVzOiA2MCxcclxuXHRcdFx0XHRcdHRvdWNoTW92ZTogZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCBlICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRyaWdodDogeyBcclxuXHRcdFx0XHR0eXBlOiAnYnV0dG9ucycsIFxyXG5cdFx0XHRcdHBvc2l0aW9uOiB7IHJpZ2h0OiAnMTclJywgYm90dG9tOiAnMjglJyB9LCBcclxuXHRcdFx0XHRidXR0b25zOiBbXHJcblx0XHRcdFx0XHR7IG9mZnNldDogeyB4OiAnLTEzJScsIHk6IDAgfSwgbGFiZWw6ICdYJywgcmFkaXVzOiAnNyUnLCBzdHJva2U6IDIsIGJhY2tncm91bmRDb2xvcjogJ2JsdWUnLCBmb250Q29sb3I6ICcjZmZmJywgdG91Y2hTdGFydDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdC8vIEJsdWUgaXMgY3VycmVudGx5IG1hcHBlZCB0byB1cCBidXR0b25cclxuXHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ3ByZXNzJywgMzggKTtcclxuXHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ2Rvd24nLCAzOCApO1xyXG5cdFx0XHRcdFx0fSwgdG91Y2hFbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAndXAnLCAzOCApO1x0XHJcblx0XHRcdFx0XHR9IH0sXHJcblx0XHRcdFx0XHR7IG9mZnNldDogeyB4OiAwLCB5OiAnLTExJScgfSwgbGFiZWw6ICdZJywgcmFkaXVzOiAnNyUnLCBzdHJva2U6IDIsIGJhY2tncm91bmRDb2xvcjogJ3llbGxvdycsIGZvbnRDb2xvcjogJyNmZmYnIH0sXHJcblx0XHRcdFx0XHR7IG9mZnNldDogeyB4OiAnMTMlJywgeTogMCB9LCBsYWJlbDogJ0InLCByYWRpdXM6ICc3JScsIHN0cm9rZTogMiwgYmFja2dyb3VuZENvbG9yOiAncmVkJywgZm9udENvbG9yOiAnI2ZmZicsIHRvdWNoU3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHQvLyBSZWQgaXMgY3VycmVudGx5IG1hcHBlZCB0byBkb3duIGJ1dHRvbiwgYW5kIHNwYWNlIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAncHJlc3MnLCAzMiApO1xyXG5cdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAnZG93bicsIDMyICk7XHJcblx0XHJcblx0XHRcdFx0XHRcdEdhbWVDb250cm9sbGVyLnNpbXVsYXRlS2V5RXZlbnQoICdwcmVzcycsIDQwICk7XHJcblx0XHRcdFx0XHRcdEdhbWVDb250cm9sbGVyLnNpbXVsYXRlS2V5RXZlbnQoICdkb3duJywgNDAgKTtcclxuXHRcdFx0XHRcdH0sIHRvdWNoRW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ3VwJywgMzIgKTtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ3VwJywgNDAgKTtcclxuXHRcdFx0XHRcdH0gfSxcclxuXHRcdFx0XHRcdHsgb2Zmc2V0OiB7IHg6IDAsIHk6ICcxMSUnIH0sIGxhYmVsOiAnQScsIHJhZGl1czogJzclJywgc3Ryb2tlOiAyLCBiYWNrZ3JvdW5kQ29sb3I6ICdncmVlbicsIGZvbnRDb2xvcjogJyNmZmYnLCB0b3VjaFN0YXJ0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0Ly8gR3JlZW4gaXMgY3VycmVudGx5IG1hcHBlZCB0byB1cCBidXR0b25cclxuXHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ3ByZXNzJywgMzggKTtcclxuXHRcdFx0XHRcdFx0R2FtZUNvbnRyb2xsZXIuc2ltdWxhdGVLZXlFdmVudCggJ2Rvd24nLCAzOCApO1xyXG5cdFx0XHRcdFx0fSwgdG91Y2hFbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRHYW1lQ29udHJvbGxlci5zaW11bGF0ZUtleUV2ZW50KCAndXAnLCAzOCApO1x0XHJcblx0XHRcdFx0XHR9ICB9XHJcblx0XHRcdFx0XSxcclxuXHRcdFx0XHRkcGFkOiB7XHJcblx0XHRcdFx0XHR1cDoge1xyXG5cdFx0XHRcdFx0XHR3aWR0aDogJzclJyxcclxuXHRcdFx0XHRcdFx0aGVpZ2h0OiAnMTUlJyxcclxuXHRcdFx0XHRcdFx0c3Ryb2tlOiAyXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0bGVmdDoge1xyXG5cdFx0XHRcdFx0XHR3aWR0aDogJzE1JScsXHJcblx0XHRcdFx0XHRcdGhlaWdodDogJzclJyxcclxuXHRcdFx0XHRcdFx0c3Ryb2tlOiAyXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZG93bjoge1xyXG5cdFx0XHRcdFx0XHR3aWR0aDogJzclJyxcclxuXHRcdFx0XHRcdFx0aGVpZ2h0OiAnMTUlJyxcclxuXHRcdFx0XHRcdFx0c3Ryb2tlOiAyXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0cmlnaHQ6IHtcclxuXHRcdFx0XHRcdFx0d2lkdGg6ICcxNSUnLFxyXG5cdFx0XHRcdFx0XHRoZWlnaHQ6ICc3JScsXHJcblx0XHRcdFx0XHRcdHN0cm9rZTogMlxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0am95c3RpY2s6IHtcclxuXHRcdFx0XHRcdHJhZGl1czogNjAsXHJcblx0XHRcdFx0XHR0b3VjaE1vdmU6IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyggZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0dG91Y2hSYWRpdXM6IDQ1XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvLyBBcmVhcyAob2JqZWN0cykgb24gdGhlIHNjcmVlbiB0aGF0IGNhbiBiZSB0b3VjaGVkXHJcblx0XHR0b3VjaGFibGVBcmVhczogW10sXHJcblx0XHRcclxuXHRcdC8vIE11bHRpLXRvdWNoXHJcblx0XHR0b3VjaGVzOiBbXSxcclxuXHRcdFxyXG5cdFx0Ly8gSGVhdnkgc3ByaXRlcyAod2l0aCBncmFkaWVudHMpIGFyZSBjYWNoZWQgYXMgYSBjYW52YXMgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZVxyXG5cdFx0Y2FjaGVkU3ByaXRlczoge30sXHJcblx0XHRcclxuXHRcdHBhdXNlZDogZmFsc2UsXHJcblx0XHRcclxuXHRcdGluaXQ6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgdGhlcmUncyBubyB0b3VjaCBzdXBwb3J0XHJcblx0XHRcdGlmKCAhICdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCApXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFxyXG5cdFxyXG5cdFx0XHQvLyBNZXJnZSBkZWZhdWx0IG9wdGlvbnMgYW5kIHNwZWNpZmllZCBvcHRpb25zXHJcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cdFx0XHRleHRlbmQoIHRoaXMub3B0aW9ucywgb3B0aW9ucyApO1x0XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBHcmFiIHRoZSBjYW52YXMgaWYgb25lIHdhc24ndCBwYXNzZWRcclxuXHRcdFx0dmFyIGVsZTtcclxuXHRcdFx0aWYoICF0aGlzLm9wdGlvbnMuY2FudmFzIHx8ICEoIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCB0aGlzLm9wdGlvbnMuY2FudmFzICkgKSApXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLm9wdGlvbnMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdjYW52YXMnIClbMF07XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiggZWxlIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMub3B0aW9ucy5jYW52YXMgPSBlbGU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHRoaXMub3B0aW9ucy5jdHggPSB0aGlzLm9wdGlvbnMuY2FudmFzLmdldENvbnRleHQoICcyZCcgKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENyZWF0ZSBhIGNhbnZhcyB0aGF0IGdvZXMgZGlyZWN0bHkgb24gdG9wIG9mIHRoZSBnYW1lIGNhbnZhc1xyXG5cdFx0XHR0aGlzLmNyZWF0ZU92ZXJsYXlDYW52YXMoKTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogQ3JlYXRlcyB0aGUgY2FudmFzIHRoYXQgc2l0cyBvbiB0b3Agb2YgdGhlIGdhbWUncyBjYW52YXMgYW5kIGhvbGRzIGdhbWUgY29udHJvbHMgXHJcblx0XHQgKi9cclxuXHRcdGNyZWF0ZU92ZXJsYXlDYW52YXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTY2FsZSB0byBzYW1lIHNpemUgYXMgb3JpZ2luYWwgY2FudmFzXHJcblx0XHRcdHRoaXMucmVzaXplKCB0cnVlICk7XHJcblx0XHRcdFxyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2JvZHknIClbMF0uYXBwZW5kQ2hpbGQoIHRoaXMuY2FudmFzICk7XHJcblx0XHRcdHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCggJzJkJyApO1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcclxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdyZXNpemUnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvLyBXYWl0IGZvciBhbnkgb3RoZXIgZXZlbnRzIHRvIGZpbmlzaFxyXG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgeyBHYW1lQ29udHJvbGxlci5yZXNpemUuY2FsbCggX3RoaXMgKTsgfSwgMSApO1xyXG5cdFx0XHR9ICk7XHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2V0IHRoZSB0b3VjaCBldmVudHMgZm9yIHRoaXMgbmV3IGNhbnZhc1xyXG5cdFx0XHR0aGlzLnNldFRvdWNoRXZlbnRzKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBMb2FkIGluIHRoZSBpbml0aWFsIFVJIGVsZW1lbnRzXHJcblx0XHRcdHRoaXMubG9hZFNpZGUoICdsZWZ0JyApO1xyXG5cdFx0XHR0aGlzLmxvYWRTaWRlKCAncmlnaHQnICk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTdGFydHMgdXAgdGhlIHJlbmRlcmluZyAvIGRyYXdpbmdcclxuXHRcdFx0dGhpcy5yZW5kZXIoKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmKCAhIHRoaXMudG91Y2hlcyB8fCB0aGlzLnRvdWNoZXMubGVuZ3RoID09IDAgKVxyXG5cdFx0XHRcdHRoaXMucGF1c2VkID0gdHJ1ZTsgLy8gcGF1c2UgdW50aWwgYSB0b3VjaCBldmVudFxyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0cGl4ZWxSYXRpbzogMSxcclxuXHRcdHJlc2l6ZTogZnVuY3Rpb24oIGZpcnN0VGltZSApIHtcclxuXHRcdFx0Ly8gU2NhbGUgdG8gc2FtZSBzaXplIGFzIG9yaWdpbmFsIGNhbnZhc1xyXG5cdFx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMub3B0aW9ucy5jYW52YXMud2lkdGg7XHJcblx0XHRcdHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMub3B0aW9ucy5jYW52YXMuaGVpZ2h0O1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gR2V0IGluIG9uIHRoaXMgcmV0aW5hIGFjdGlvblxyXG5cdFx0XHRpZiggdGhpcy5vcHRpb25zLmNhbnZhcy5zdHlsZS53aWR0aCAmJiB0aGlzLm9wdGlvbnMuY2FudmFzLnN0eWxlLmhlaWdodCAmJiB0aGlzLm9wdGlvbnMuY2FudmFzLnN0eWxlLmhlaWdodC5pbmRleE9mKCAncHgnICkgIT09IC0xICkgXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IHRoaXMub3B0aW9ucy5jYW52YXMuc3R5bGUud2lkdGg7XHJcblx0XHRcdFx0dGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gdGhpcy5vcHRpb25zLmNhbnZhcy5zdHlsZS5oZWlnaHQ7XHJcblx0XHRcdFx0dGhpcy5waXhlbFJhdGlvID0gdGhpcy5jYW52YXMud2lkdGggLyBwYXJzZUludCggdGhpcy5jYW52YXMuc3R5bGUud2lkdGggKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5jYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG5cdFx0XHR0aGlzLmNhbnZhcy5zdHlsZS5sZWZ0ID0gdGhpcy5vcHRpb25zLmNhbnZhcy5vZmZzZXRMZWZ0ICsgJ3B4JztcclxuXHRcdFx0dGhpcy5jYW52YXMuc3R5bGUudG9wID0gdGhpcy5vcHRpb25zLmNhbnZhcy5vZmZzZXRUb3AgKyAncHgnO1xyXG5cdFx0XHR0aGlzLmNhbnZhcy5zZXRBdHRyaWJ1dGUoICdzdHlsZScsIHRoaXMuY2FudmFzLmdldEF0dHJpYnV0ZSggJ3N0eWxlJyApICsnIC1tcy10b3VjaC1hY3Rpb246IG5vbmU7JyApO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYoICFmaXJzdFRpbWUgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly8gUmVtb3ZlIGFsbCBjdXJyZW50IGJ1dHRvbnNcclxuXHRcdFx0XHR0aGlzLnRvdWNoYWJsZUFyZWFzID0gW107XHJcblx0XHRcdFx0Ly8gQ2xlYXIgb3V0IHRoZSBjYWNoZWQgc3ByaXRlc1xyXG5cdFx0XHRcdHRoaXMuY2FjaGVkU3ByaXRlcyA9IFtdO1xyXG5cdFx0XHRcdC8vIFJlbG9hZCBpbiB0aGUgaW5pdGlhbCBVSSBlbGVtZW50c1xyXG5cdFx0XHRcdHRoaXMucmVsb2FkU2lkZSggJ2xlZnQnICk7XHJcblx0XHRcdFx0dGhpcy5yZWxvYWRTaWRlKCAncmlnaHQnICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogUmV0dXJucyB0aGUgc2NhbGVkIHBpeGVscy4gR2l2ZW4gdGhlIHZhbHVlIHBhc3NlZFxyXG5cdFx0ICogQHBhcmFtIHtpbnQvc3RyaW5nfSB2YWx1ZSAtIGVpdGhlciBhbiBpbnRlZ2VyIGZvciAjIG9mIHBpeGVscywgb3IgJ3glJyBmb3IgcmVsYXRpdmVcclxuXHRcdCAqIEBwYXJhbSB7Y2hhcn0gYXhpcyAtIHgsIHlcclxuXHRcdCAqL1xyXG5cdFx0Z2V0UGl4ZWxzOiBmdW5jdGlvbiggdmFsdWUsIGF4aXMgKVxyXG5cdFx0e1xyXG5cdFx0XHRpZiggdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyApXHJcblx0XHRcdFx0cmV0dXJuIDBcclxuXHRcdFx0ZWxzZSBpZiggdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyApXHJcblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xyXG5cdFx0XHRlbHNlIC8vIGEgcGVyY2VudGFnZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIGF4aXMgPT0gJ3gnIClcclxuXHRcdFx0XHRcdHJldHVybiAoIHBhcnNlSW50KCB2YWx1ZSApIC8gMTAwICkgKiB0aGlzLmNhbnZhcy53aWR0aDtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRyZXR1cm4gKCBwYXJzZUludCggdmFsdWUgKSAvIDEwMCApICogdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFNpbXVsYXRlcyBhIGtleSBwcmVzc1xyXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSAtICdkb3duJywgJ3VwJ1xyXG5cdFx0ICogQHBhcmFtIHtjaGFyfSBjaGFyYWN0ZXJcclxuXHRcdCAqL1xyXG5cdFx0c2ltdWxhdGVLZXlFdmVudDogZnVuY3Rpb24oIGV2ZW50TmFtZSwga2V5Q29kZSApIHtcclxuXHRcdFx0aWYoIHR5cGVvZiB3aW5kb3cub25rZXlkb3duID09PSAndW5kZWZpbmVkJyApIC8vIE5vIGtleWJvYXJkLCBjYW4ndCBzaW11bGF0ZS4uLlxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0LyogSWYgdGhleSBoYXZlIGpRdWVyeSwgdXNlIGl0IGJlY2F1c2UgaXQgd29ya3MgYmV0dGVyIGZvciBtb2JpbGUgc2FmYXJpICovXHJcblx0XHRcdGlmKCBqUXVlcnkgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIHByZXNzID0galF1ZXJ5LkV2ZW50KCAna2V5JyArIGV2ZW50TmFtZSApO1xyXG5cdFx0XHRcdHByZXNzLmN0cmxLZXkgPSBmYWxzZTtcclxuXHRcdFx0XHRwcmVzcy53aGljaCA9IGtleUNvZGU7XHJcblx0XHRcdFx0JCggZG9jdW1lbnQgKS50cmlnZ2VyKCBwcmVzcyApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFxyXG5cdFx0XHR2YXIgb0V2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoICdLZXlib2FyZEV2ZW50JyApO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hyb21pdW0gSGFja1xyXG5cdFx0XHRpZiggbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2Nocm9tZScpICE9PSAtMSApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIG9FdmVudCwgJ2tleUNvZGUnLCB7XHJcblx0XHRcdFx0XHRnZXQgOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMua2V5Q29kZVZhbDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9ICk7XHQgXHJcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCBvRXZlbnQsICd3aGljaCcsIHtcclxuXHRcdFx0XHRcdGdldCA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5rZXlDb2RlVmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRpZiggb0V2ZW50LmluaXRLZXlib2FyZEV2ZW50IClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG9FdmVudC5pbml0S2V5Ym9hcmRFdmVudCggJ2tleScgKyBldmVudE5hbWUsIHRydWUsIHRydWUsIGRvY3VtZW50LmRlZmF1bHRWaWV3LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwga2V5Q29kZSwga2V5Q29kZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG9FdmVudC5pbml0S2V5RXZlbnQoICdrZXknICsgZXZlbnROYW1lLCB0cnVlLCB0cnVlLCBkb2N1bWVudC5kZWZhdWx0VmlldywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGtleUNvZGUsIGtleUNvZGUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHJcblx0XHRcdG9FdmVudC5rZXlDb2RlVmFsID0ga2V5Q29kZTtcclxuXHRcdFxyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0c2V0VG91Y2hFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdFx0XHR2YXIgdG91Y2hTdGFydCA9IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdGlmKCBfdGhpcy5wYXVzZWQgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF90aGlzLnBhdXNlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcclxuXHRcdFx0XHQvLyBNaWNyb3NvZnQgYWx3YXlzIGhhcyB0byBoYXZlIHRoZWlyIG93biBzdHVmZi4uLlxyXG5cdFx0XHRcdGlmKCB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQgJiYgZS5jbGllbnRYICYmIGUucG9pbnRlclR5cGUgPT0gZS5NU1BPSU5URVJfVFlQRV9UT1VDSCApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0X3RoaXMudG91Y2hlc1sgZS5wb2ludGVySWQgXSA9IHsgY2xpZW50WDogZS5jbGllbnRYLCBjbGllbnRZOiBlLmNsaWVudFkgfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF90aGlzLnRvdWNoZXMgPSBlLnRvdWNoZXMgfHwgW107XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFxyXG5cdFx0XHR0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCAndG91Y2hzdGFydCcsIHRvdWNoU3RhcnQsIGZhbHNlICk7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgdG91Y2hFbmQgPSBmdW5jdGlvbiggZSApIHtcdFx0XHRcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFxyXG5cdFx0XHRcdGlmKCB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQgJiYgZS5wb2ludGVyVHlwZSA9PSBlLk1TUE9JTlRFUl9UWVBFX1RPVUNIIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkZWxldGUgX3RoaXMudG91Y2hlc1sgZS5wb2ludGVySWQgXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcdFxyXG5cdFx0XHRcdFx0X3RoaXMudG91Y2hlcyA9IGUudG91Y2hlcyB8fCBbXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYoICFlLnRvdWNoZXMgfHwgZS50b3VjaGVzLmxlbmd0aCA9PSAwIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQvLyBEcmF3IG9uY2UgbW9yZSB0byByZW1vdmUgdGhlIHRvdWNoIGFyZWFcclxuXHRcdFx0XHRcdF90aGlzLnJlbmRlcigpO1xyXG5cdFx0XHRcdFx0X3RoaXMucGF1c2VkID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcdHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaGVuZCcsIHRvdWNoRW5kICk7XHJcblx0XHJcblx0XHRcdHZhciB0b3VjaE1vdmUgPSBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYoIHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCAmJiBlLmNsaWVudFggJiYgZS5wb2ludGVyVHlwZSA9PSBlLk1TUE9JTlRFUl9UWVBFX1RPVUNIIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRfdGhpcy50b3VjaGVzWyBlLnBvaW50ZXJJZCBdID0geyBjbGllbnRYOiBlLmNsaWVudFgsIGNsaWVudFk6IGUuY2xpZW50WSB9O1x0XHRcdFx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRfdGhpcy50b3VjaGVzID0gZS50b3VjaGVzIHx8IFtdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNobW92ZScsIHRvdWNoTW92ZSApO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYoIHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCApXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCAnTVNQb2ludGVyRG93bicsIHRvdWNoU3RhcnQgKTtcclxuXHRcdFx0XHR0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCAnTVNQb2ludGVyVXAnLCB0b3VjaEVuZCApO1xyXG5cdFx0XHRcdHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoICdNU1BvaW50ZXJNb3ZlJywgdG91Y2hNb3ZlICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogQWRkcyB0aGUgYXJlYSB0byBhIGxpc3Qgb2YgdG91Y2hhYmxlIGFyZWFzLCBkcmF3c1xyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgd2l0aCBwcm9wZXJ0aWVzOiB4LCB5LCB3aWR0aCwgaGVpZ2h0LCB0b3VjaFN0YXJ0LCB0b3VjaEVuZCwgdG91Y2hNb3ZlXHJcblx0XHQgKi9cclxuXHRcdGFkZFRvdWNoYWJsZURpcmVjdGlvbjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZGlyZWN0aW9uID0gbmV3IFRvdWNoYWJsZURpcmVjdGlvbiggb3B0aW9ucyApO1xyXG5cdFx0XHRcclxuXHRcdFx0ZGlyZWN0aW9uLmlkID0gdGhpcy50b3VjaGFibGVBcmVhcy5wdXNoKCBkaXJlY3Rpb24gKTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogQWRkcyB0aGUgY2lyY3VsYXIgYXJlYSB0byBhIGxpc3Qgb2YgdG91Y2hhYmxlIGFyZWFzLCBkcmF3c1x0XHJcblx0XHQgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyB3aXRoIHByb3BlcnRpZXM6IHgsIHksIHdpZHRoLCBoZWlnaHQsIHRvdWNoU3RhcnQsIHRvdWNoRW5kLCB0b3VjaE1vdmVcclxuXHRcdCAqL1xyXG5cdFx0YWRkSm95c3RpY2s6IGZ1bmN0aW9uKCBvcHRpb25zICkgeyAvL3gsIHksIHJhZGl1cywgYmFja2dyb3VuZENvbG9yLCB0b3VjaFN0YXJ0LCB0b3VjaEVuZCApIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBqb3lzdGljayA9IG5ldyBUb3VjaGFibGVKb3lzdGljayggb3B0aW9ucyApO1xyXG5cdFx0XHRcclxuXHRcdFx0am95c3RpY2suaWQgPSB0aGlzLnRvdWNoYWJsZUFyZWFzLnB1c2goIGpveXN0aWNrICk7XHJcblx0XHRcdFxyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBBZGRzIHRoZSBjaXJjdWxhciBhcmVhIHRvIGEgbGlzdCBvZiB0b3VjaGFibGUgYXJlYXMsIGRyYXdzXHQgXHJcblx0XHQgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyB3aXRoIHByb3BlcnRpZXM6IHgsIHksIHdpZHRoLCBoZWlnaHQsIHRvdWNoU3RhcnQsIHRvdWNoRW5kLCB0b3VjaE1vdmVcclxuXHRcdCAqL1xyXG5cdFx0YWRkQnV0dG9uOiBmdW5jdGlvbiggb3B0aW9ucyApIHsgLy94LCB5LCByYWRpdXMsIGJhY2tncm91bmRDb2xvciwgdG91Y2hTdGFydCwgdG91Y2hFbmQgKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgYnV0dG9uID0gbmV3IFRvdWNoYWJsZUJ1dHRvbiggb3B0aW9ucyApO1xyXG5cdFx0XHRcclxuXHRcdFx0YnV0dG9uLmlkID0gdGhpcy50b3VjaGFibGVBcmVhcy5wdXNoKCBidXR0b24gKTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdGFkZFRvdWNoYWJsZUFyZWE6IGZ1bmN0aW9uKCBjaGVjaywgY2FsbGJhY2sgKSB7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHRsb2FkQnV0dG9uczogZnVuY3Rpb24oIHNpZGUgKSB7XHJcblx0XHRcdHZhciBidXR0b25zID0gdGhpcy5vcHRpb25zWyBzaWRlIF0uYnV0dG9ucztcclxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcclxuXHRcdFx0Zm9yKCB2YXIgaSA9IDAsIGogPSBidXR0b25zLmxlbmd0aDsgaSA8IGo7IGkrKyApXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgcG9zWCA9IHRoaXMuZ2V0UG9zaXRpb25YKCBzaWRlICk7XHJcblx0XHRcdFx0dmFyIHBvc1kgPSB0aGlzLmdldFBvc2l0aW9uWSggc2lkZSApO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdGJ1dHRvbnNbaV0ueCA9IHBvc1ggKyB0aGlzLmdldFBpeGVscyggYnV0dG9uc1tpXS5vZmZzZXQueCwgJ3knICk7XHJcblx0XHRcdFx0YnV0dG9uc1tpXS55ID0gcG9zWSArIHRoaXMuZ2V0UGl4ZWxzKCBidXR0b25zW2ldLm9mZnNldC55LCAneScgKTtcclxuXHRcclxuXHRcdFx0XHR0aGlzLmFkZEJ1dHRvbiggYnV0dG9uc1tpXSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHRsb2FkRFBhZDogZnVuY3Rpb24oIHNpZGUgKSB7XHJcblx0XHRcdHZhciBkcGFkID0gdGhpcy5vcHRpb25zWyBzaWRlIF0uZHBhZCB8fCB7fTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENlbnRlcmVkIHZhbHVlIGlzIGF0IHRoaXMub3B0aW9uc1sgc2lkZSBdLnBvc2l0aW9uXHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHBvc1ggPSB0aGlzLmdldFBvc2l0aW9uWCggc2lkZSApO1xyXG5cdFx0XHR2YXIgcG9zWSA9IHRoaXMuZ2V0UG9zaXRpb25ZKCBzaWRlICk7XHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSWYgdGhleSBoYXZlIGFsbCA0IGRpcmVjdGlvbnMsIGFkZCBhIGNpcmNsZSB0byB0aGUgY2VudGVyIGZvciBsb29rc1xyXG5cdFx0XHRpZiggZHBhZC51cCAmJiBkcGFkLmxlZnQgJiYgZHBhZC5kb3duICYmIGRwYWQucmlnaHQgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIG9wdGlvbnMgPSB7XHJcblx0XHRcdFx0XHR4OiBwb3NYLFxyXG5cdFx0XHRcdFx0eTogcG9zWSxcclxuXHRcdFx0XHRcdHJhZGl1czogZHBhZC5yaWdodC5oZWlnaHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIGNlbnRlciA9IG5ldyBUb3VjaGFibGVDaXJjbGUoIG9wdGlvbnMgKTsgXHJcblx0XHRcdFx0dGhpcy50b3VjaGFibGVBcmVhcy5wdXNoKCBjZW50ZXIgKTtcclxuXHRcdFx0fVxyXG5cdFxyXG5cdFx0XHQvLyBVcCBhcnJvd1xyXG5cdFx0XHRpZiggZHBhZC51cCAhPT0gZmFsc2UgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZHBhZC51cC54ID0gcG9zWCAtIHRoaXMuZ2V0UGl4ZWxzKCBkcGFkLnVwLndpZHRoLCAneScgKSAvIDI7XHJcblx0XHRcdFx0ZHBhZC51cC55ID0gcG9zWSAtICggdGhpcy5nZXRQaXhlbHMoIGRwYWQudXAuaGVpZ2h0LCAneScgKSArICB0aGlzLmdldFBpeGVscyggZHBhZC5sZWZ0LmhlaWdodCwgJ3knICkgLyAyICk7XHJcblx0XHRcdFx0ZHBhZC51cC5kaXJlY3Rpb24gPSAndXAnO1xyXG5cdFx0XHRcdHRoaXMuYWRkVG91Y2hhYmxlRGlyZWN0aW9uKCBkcGFkLnVwICk7XHJcblx0XHRcdH1cclxuXHRcclxuXHRcdFx0Ly8gTGVmdCBhcnJvd1xyXG5cdFx0XHRpZiggZHBhZC5sZWZ0ICE9PSBmYWxzZSApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRkcGFkLmxlZnQueCA9IHBvc1ggLSAoIHRoaXMuZ2V0UGl4ZWxzKCBkcGFkLmxlZnQud2lkdGgsICd5JyApICsgdGhpcy5nZXRQaXhlbHMoIGRwYWQudXAud2lkdGgsICd5JyApIC8gMiApO1xyXG5cdFx0XHRcdGRwYWQubGVmdC55ID0gcG9zWSAtICggdGhpcy5nZXRQaXhlbHMoIGRwYWQubGVmdC5oZWlnaHQsICd5JyApIC8gMiApO1xyXG5cdFx0XHRcdGRwYWQubGVmdC5kaXJlY3Rpb24gPSAnbGVmdCc7XHJcblx0XHRcdFx0dGhpcy5hZGRUb3VjaGFibGVEaXJlY3Rpb24oIGRwYWQubGVmdCApO1xyXG5cdFx0XHR9XHJcblx0XHJcblx0XHRcdC8vIERvd24gYXJyb3dcclxuXHRcdFx0aWYoIGRwYWQuZG93biAhPT0gZmFsc2UgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZHBhZC5kb3duLnggPSBwb3NYIC0gdGhpcy5nZXRQaXhlbHMoIGRwYWQuZG93bi53aWR0aCwgJ3knICkgLyAyO1xyXG5cdFx0XHRcdGRwYWQuZG93bi55ID0gcG9zWSArICggdGhpcy5nZXRQaXhlbHMoIGRwYWQubGVmdC5oZWlnaHQsICd5JyApIC8gMiApO1xyXG5cdFx0XHRcdGRwYWQuZG93bi5kaXJlY3Rpb24gPSAnZG93bic7XHJcblx0XHRcdFx0dGhpcy5hZGRUb3VjaGFibGVEaXJlY3Rpb24oIGRwYWQuZG93biApO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSaWdodCBhcnJvd1xyXG5cdFx0XHRpZiggZHBhZC5yaWdodCAhPT0gZmFsc2UgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZHBhZC5yaWdodC54ID0gcG9zWCArICggdGhpcy5nZXRQaXhlbHMoIGRwYWQudXAud2lkdGgsICd5JyApIC8gMiApO1xyXG5cdFx0XHRcdGRwYWQucmlnaHQueSA9IHBvc1kgLSB0aGlzLmdldFBpeGVscyggZHBhZC5yaWdodC5oZWlnaHQsICd5JyApIC8gMjtcclxuXHRcdFx0XHRkcGFkLnJpZ2h0LmRpcmVjdGlvbiA9ICdyaWdodCc7XHJcblx0XHRcdFx0dGhpcy5hZGRUb3VjaGFibGVEaXJlY3Rpb24oIGRwYWQucmlnaHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdGxvYWRKb3lzdGljazogZnVuY3Rpb24oIHNpZGUgKSB7XHJcblx0XHRcdHZhciBqb3lzdGljayA9IHRoaXMub3B0aW9uc1sgc2lkZSBdLmpveXN0aWNrO1xyXG5cdFx0XHRqb3lzdGljay54ID0gdGhpcy5nZXRQb3NpdGlvblgoIHNpZGUgKTtcclxuXHRcdFx0am95c3RpY2sueSA9IHRoaXMuZ2V0UG9zaXRpb25ZKCBzaWRlICk7XHJcblx0XHJcblx0XHRcdHRoaXMuYWRkSm95c3RpY2soIGpveXN0aWNrICk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFVzZWQgZm9yIHJlc2l6aW5nLiBDdXJyZW50bHkgaXMganVzdCBhbiBhbGlhcyBmb3IgbG9hZFNpZGVcclxuXHRcdCAqL1xyXG5cdFx0cmVsb2FkU2lkZTogZnVuY3Rpb24oIHNpZGUgKSB7XHJcblx0XHRcdC8vIExvYWQgaW4gbmV3IG9uZXNcclxuXHRcdFx0dGhpcy5sb2FkU2lkZSggc2lkZSApO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0bG9hZFNpZGU6IGZ1bmN0aW9uKCBzaWRlICkge1xyXG5cdFx0XHRpZiggdGhpcy5vcHRpb25zWyBzaWRlIF0udHlwZSA9PT0gJ2RwYWQnIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMubG9hZERQYWQoIHNpZGUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKCB0aGlzLm9wdGlvbnNbIHNpZGUgXS50eXBlID09PSAnam95c3RpY2snIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMubG9hZEpveXN0aWNrKCBzaWRlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiggdGhpcy5vcHRpb25zWyBzaWRlIF0udHlwZSA9PT0gJ2J1dHRvbnMnIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMubG9hZEJ1dHRvbnMoIHNpZGUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBOb3JtYWxpemUgdG91Y2ggcG9zaXRpb25zIGJ5IHRoZSBsZWZ0IGFuZCB0b3Agb2Zmc2V0c1xyXG5cdFx0ICogQHBhcmFtIHtpbnR9IHhcclxuXHRcdCAqL1xyXG5cdFx0bm9ybWFsaXplVG91Y2hQb3NpdGlvblg6IGZ1bmN0aW9uKCB4IClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuICggeCAtIEdhbWVDb250cm9sbGVyLm9wdGlvbnMuY2FudmFzLm9mZnNldExlZnQgKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgKSAqICggdGhpcy5waXhlbFJhdGlvICk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIE5vcm1hbGl6ZSB0b3VjaCBwb3NpdGlvbnMgYnkgdGhlIGxlZnQgYW5kIHRvcCBvZmZzZXRzXHJcblx0XHQgKiBAcGFyYW0ge2ludH0geVxyXG5cdFx0ICovXHJcblx0XHRub3JtYWxpemVUb3VjaFBvc2l0aW9uWTogZnVuY3Rpb24oIHkgKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gKCB5IC0gR2FtZUNvbnRyb2xsZXIub3B0aW9ucy5jYW52YXMub2Zmc2V0VG9wICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKSAqICggdGhpcy5waXhlbFJhdGlvICk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFJldHVybnMgdGhlIHggcG9zaXRpb24gd2hlbiBnaXZlbiAjIG9mIHBpeGVscyBmcm9tIHJpZ2h0IChiYXNlZCBvbiBjYW52YXMgc2l6ZSlcclxuXHRcdCAqIEBwYXJhbSB7aW50fSByaWdodCBcclxuXHRcdCAqL1xyXG5cdFx0Z2V0WEZyb21SaWdodDogZnVuY3Rpb24oIHJpZ2h0ICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5jYW52YXMud2lkdGggLSByaWdodDtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBSZXR1cm5zIHRoZSB5IHBvc2l0aW9uIHdoZW4gZ2l2ZW4gIyBvZiBwaXhlbHMgZnJvbSBib3R0b20gKGJhc2VkIG9uIGNhbnZhcyBzaXplKVxyXG5cdFx0ICogQHBhcmFtIHtpbnR9IHJpZ2h0IFxyXG5cdFx0ICovXHJcblx0XHRnZXRZRnJvbUJvdHRvbTogZnVuY3Rpb24oIGJvdHRvbSApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuY2FudmFzLmhlaWdodCAtIGJvdHRvbTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogR3JhYnMgdGhlIHggcG9zaXRpb24gb2YgZWl0aGVyIHRoZSBsZWZ0IG9yIHJpZ2h0IHNpZGUvY29udHJvbHNcclxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBzaWRlIC0gJ2xlZnQnLCAncmlnaHQnIFxyXG5cdFx0ICovXHJcblx0XHRnZXRQb3NpdGlvblg6IGZ1bmN0aW9uKCBzaWRlICkge1xyXG5cdFx0XHRpZiggdHlwZW9mIHRoaXMub3B0aW9uc1sgc2lkZSBdLnBvc2l0aW9uLmxlZnQgIT09ICd1bmRlZmluZWQnIClcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5nZXRQaXhlbHMoIHRoaXMub3B0aW9uc1sgc2lkZSBdLnBvc2l0aW9uLmxlZnQsICd4JyApO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0WEZyb21SaWdodCggdGhpcy5nZXRQaXhlbHMoIHRoaXMub3B0aW9uc1sgc2lkZSBdLnBvc2l0aW9uLnJpZ2h0LCAneCcgKSApO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBHcmFicyB0aGUgeSBwb3NpdGlvbiBvZiBlaXRoZXIgdGhlIGxlZnQgb3IgcmlnaHQgc2lkZS9jb250cm9sc1xyXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHNpZGUgLSAnbGVmdCcsICdyaWdodCcgXHJcblx0XHQgKi9cclxuXHRcdGdldFBvc2l0aW9uWTogZnVuY3Rpb24oIHNpZGUgKSB7XHJcblx0XHRcdGlmKCB0eXBlb2YgdGhpcy5vcHRpb25zWyBzaWRlIF0ucG9zaXRpb24udG9wICE9PSAndW5kZWZpbmVkJyApXHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0UGl4ZWxzKCB0aGlzLm9wdGlvbnNbIHNpZGUgXS5wb3NpdGlvbi50b3AsICd5JyApO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0WUZyb21Cb3R0b20oIHRoaXMuZ2V0UGl4ZWxzKCB0aGlzLm9wdGlvbnNbIHNpZGUgXS5wb3NpdGlvbi5ib3R0b20sICd5JyApICk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdFx0XHR0aGlzLmN0eC5jbGVhclJlY3QoIDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQgKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0Ly8gV2hlbiBubyB0b3VjaCBldmVudHMgYXJlIGhhcHBlbmluZywgdGhpcyBlbmFibGVzICdwYXVzZWQnIG1vZGUsIHdoaWNoIG9ubHkgc2tpcHMgdGhpcyBzbWFsbCBwYXJ0LlxyXG5cdFx0XHQvLyBTa2lwcGluZyB0aGUgY2xlYXJSZWN0IGFuZCBkcmF3KClzIHdvdWxkIGJlIG5pY2UsIGJ1dCBpdCBtZXNzZXMgd2l0aCB0aGUgdHJhbnNwYXJlbnQgZ3JhZGllbnRzXHJcblx0XHRcdGlmKCAhIHRoaXMucGF1c2VkIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBjYWNoZUlkID0gJ3RvdWNoLWNpcmNsZSc7XHJcblx0XHRcdFx0dmFyIGNhY2hlZCA9IEdhbWVDb250cm9sbGVyLmNhY2hlZFNwcml0ZXNbIGNhY2hlSWQgXTtcclxuXHRcdFx0XHRpZiggISBjYWNoZWQgJiYgdGhpcy5vcHRpb25zLnRvdWNoUmFkaXVzIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgc3ViQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2NhbnZhcycgKTtcclxuXHRcdFx0XHRcdHZhciBjdHggPSBzdWJDYW52YXMuZ2V0Q29udGV4dCggJzJkJyApO1xyXG5cdFx0XHRcdFx0c3ViQ2FudmFzLndpZHRoID0gMiAqIHRoaXMub3B0aW9ucy50b3VjaFJhZGl1cztcclxuXHRcdFx0XHRcdHN1YkNhbnZhcy5oZWlnaHQgPSAyICogdGhpcy5vcHRpb25zLnRvdWNoUmFkaXVzO1xyXG5cdFx0XHJcblx0XHRcdFx0XHR2YXIgY2VudGVyID0gdGhpcy5vcHRpb25zLnRvdWNoUmFkaXVzO1xyXG5cdFx0XHRcdFx0dmFyIGdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KCBjZW50ZXIsIGNlbnRlciwgMSwgY2VudGVyLCBjZW50ZXIsIHRoaXMub3B0aW9ucy50b3VjaFJhZGl1cyApOyAvLyAxMCA9IGVuZCByYWRpdXNcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMCwgJ3JnYmEoIDIwMCwgMjAwLCAyMDAsIDEgKScgKTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMSwgJ3JnYmEoIDIwMCwgMjAwLCAyMDAsIDAgKScgKTtcclxuXHRcdFx0XHRcdGN0eC5iZWdpblBhdGgoKTtcclxuXHRcdFx0XHRcdGN0eC5maWxsU3R5bGUgPSBncmFkaWVudDtcclxuXHRcdFx0XHRcdGN0eC5hcmMoIGNlbnRlciwgY2VudGVyLCB0aGlzLm9wdGlvbnMudG91Y2hSYWRpdXMsIDAgLCAyICogTWF0aC5QSSwgZmFsc2UgKTtcclxuXHRcdFx0XHRcdGN0eC5maWxsKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYWNoZWQgPSBHYW1lQ29udHJvbGxlci5jYWNoZWRTcHJpdGVzWyBjYWNoZUlkIF0gPSBzdWJDYW52YXM7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIERyYXcgdGhlIGN1cnJlbnQgdG91Y2ggcG9zaXRpb25zIGlmIGFueVxyXG5cdFx0XHRcdGZvciggdmFyIGkgPSAwLCBqID0gdGhpcy50b3VjaGVzLmxlbmd0aDsgaSA8IGo7IGkrKyApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIHRvdWNoID0gdGhpcy50b3VjaGVzWyBpIF07XHJcblx0XHRcdFx0XHRpZiggdHlwZW9mIHRvdWNoID09PSAndW5kZWZpbmVkJyApXHJcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0dmFyIHggPSB0aGlzLm5vcm1hbGl6ZVRvdWNoUG9zaXRpb25YKCB0b3VjaC5jbGllbnRYICksIHkgPSB0aGlzLm5vcm1hbGl6ZVRvdWNoUG9zaXRpb25ZKCB0b3VjaC5jbGllbnRZICk7XHJcblx0XHRcdFx0XHR0aGlzLmN0eC5kcmF3SW1hZ2UoIGNhY2hlZCwgeCAtIHRoaXMub3B0aW9ucy50b3VjaFJhZGl1cywgeSAtIHRoaXMub3B0aW9ucy50b3VjaFJhZGl1cyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Zm9yKCB2YXIgaSA9IDAsIGogPSB0aGlzLnRvdWNoYWJsZUFyZWFzLmxlbmd0aDsgaSA8IGo7IGkrKyApXHJcblx0XHRcdHtcdFxyXG5cdFx0XHRcdHRoaXMudG91Y2hhYmxlQXJlYXNbIGkgXS5kcmF3KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGFyZWEgPSB0aGlzLnRvdWNoYWJsZUFyZWFzWyBpIF07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHQvLyBHbyB0aHJvdWdoIGFsbCB0b3VjaGVzIHRvIHNlZSBpZiBhbnkgaGl0IHRoaXMgYXJlYVxyXG5cdFx0XHRcdHZhciB0b3VjaGVkID0gZmFsc2U7XHJcblx0XHRcdFx0Zm9yKCB2YXIgayA9IDAsIGwgPSB0aGlzLnRvdWNoZXMubGVuZ3RoOyBrIDwgbDsgaysrIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgdG91Y2ggPSB0aGlzLnRvdWNoZXNbIGsgXTtcclxuXHRcdFx0XHRcdGlmKCB0eXBlb2YgdG91Y2ggPT09ICd1bmRlZmluZWQnIClcclxuXHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHJcblx0XHRcdFx0XHR2YXIgeCA9IHRoaXMubm9ybWFsaXplVG91Y2hQb3NpdGlvblgoIHRvdWNoLmNsaWVudFggKSwgeSA9IHRoaXMubm9ybWFsaXplVG91Y2hQb3NpdGlvblkoIHRvdWNoLmNsaWVudFkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENoZWNrIHRoYXQgaXQncyBpbiB0aGUgYm91bmRpbmcgYm94L2NpcmNsZVxyXG5cdFx0XHRcdFx0aWYoICggYXJlYS5jaGVjayggeCwgeSApICkgIT09IGZhbHNlIClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYoICF0b3VjaGVkIClcclxuXHRcdFx0XHRcdFx0XHR0b3VjaGVkID0gdGhpcy50b3VjaGVzWyBrIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCB0b3VjaGVkIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZiggIWFyZWEuYWN0aXZlIClcclxuXHRcdFx0XHRcdFx0YXJlYS50b3VjaFN0YXJ0V3JhcHBlciggdG91Y2hlZCApO1xyXG5cdFx0XHRcdFx0YXJlYS50b3VjaE1vdmVXcmFwcGVyKCB0b3VjaGVkICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYoIGFyZWEuYWN0aXZlIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRhcmVhLnRvdWNoRW5kV3JhcHBlciggdG91Y2hlZCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSggdGhpcy5yZW5kZXJXcmFwcGVyICk7XHJcblx0XHR9LFxyXG5cdFx0LyoqXHJcblx0XHQgKiBTbyB3ZSBjYW4ga2VlcCBzY29wZSwgYW5kIGRvbid0IGhhdmUgdG8gY3JlYXRlIGEgbmV3IG9iaiBldmVyeSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKGJhZCBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uKSBcclxuXHRcdCAqL1xyXG5cdFx0cmVuZGVyV3JhcHBlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdEdhbWVDb250cm9sbGVyLnJlbmRlcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFN1cGVyY2xhc3MgZm9yIHRvdWNoYWJsZSBzdHVmZiBcclxuXHQgKi9cclxuXHR2YXIgVG91Y2hhYmxlQXJlYSA9ICggZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIFRvdWNoYWJsZUFyZWEoKSBcclxuXHRcdHtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gQ2FsbGVkIHdoZW4gdGhpcyBkaXJlY3Rpb24gaXMgYmVpbmcgdG91Y2hlZFxyXG5cdFx0VG91Y2hhYmxlQXJlYS5wcm90b3R5cGUudG91Y2hTdGFydCA9IG51bGw7XHJcblx0XHRcclxuXHRcdC8vIENhbGxlZCB3aGVuIHRoaXMgZGlyZWN0aW9uIGlzIGJlaW5nIG1vdmVkXHJcblx0XHRUb3VjaGFibGVBcmVhLnByb3RvdHlwZS50b3VjaE1vdmUgPSBudWxsO1xyXG5cdFx0XHJcblx0XHQvLyBDYWxsZWQgd2hlbiB0aGlzIGRpcmVjdGlvbiBpcyBubyBsb25nZXIgYmVpbmcgdG91Y2hlZFxyXG5cdFx0VG91Y2hhYmxlQXJlYS5wcm90b3R5cGUudG91Y2hFbmQgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRUb3VjaGFibGVBcmVhLnByb3RvdHlwZS50eXBlID0gJ2FyZWEnO1xyXG5cdFx0VG91Y2hhYmxlQXJlYS5wcm90b3R5cGUuaWQgPSBmYWxzZTtcclxuXHRcdFRvdWNoYWJsZUFyZWEucHJvdG90eXBlLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFNldHMgdGhlIHVzZXItc3BlY2lmaWVkIGNhbGxiYWNrIGZvciB0aGlzIGRpcmVjdGlvbiBiZWluZyB0b3VjaGVkXHJcblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBcclxuXHRcdCAqL1xyXG5cdFx0VG91Y2hhYmxlQXJlYS5wcm90b3R5cGUuc2V0VG91Y2hTdGFydCA9IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcclxuXHRcdFx0dGhpcy50b3VjaFN0YXJ0ID0gY2FsbGJhY2s7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIENhbGxlZCB3aGVuIHRoaXMgZGlyZWN0aW9uIGlzIG5vIGxvbmdlciB0b3VjaGVkIFxyXG5cdFx0ICovXHJcblx0XHRUb3VjaGFibGVBcmVhLnByb3RvdHlwZS50b3VjaFN0YXJ0V3JhcHBlciA9IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHQvLyBGaXJlIHRoZSB1c2VyIHNwZWNpZmllZCBjYWxsYmFja1xyXG5cdFx0XHRpZiggdGhpcy50b3VjaFN0YXJ0IClcclxuXHRcdFx0XHR0aGlzLnRvdWNoU3RhcnQoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIE1hcmsgdGhpcyBkaXJlY3Rpb24gYXMgYWN0aXZlXHJcblx0XHRcdHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogU2V0cyB0aGUgdXNlci1zcGVjaWZpZWQgY2FsbGJhY2sgZm9yIHRoaXMgZGlyZWN0aW9uIG5vIGxvbmdlciBiZWluZyB0b3VjaGVkXHJcblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBcclxuXHRcdCAqL1xyXG5cdFx0VG91Y2hhYmxlQXJlYS5wcm90b3R5cGUuc2V0VG91Y2hNb3ZlID0gZnVuY3Rpb24oIGNhbGxiYWNrICkge1xyXG5cdFx0XHR0aGlzLnRvdWNoTW92ZSA9IGNhbGxiYWNrO1xyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBDYWxsZWQgd2hlbiB0aGlzIGRpcmVjdGlvbiBpcyBtb3ZlZC4gTWFrZSBzdXJlIGl0J3MgYWN0dWFsbHkgY2hhbmdlZCBiZWZvcmUgcGFzc2luZyB0byBkZXZlbG9wZXJcclxuXHRcdCAqL1xyXG5cdFx0VG91Y2hhYmxlQXJlYS5wcm90b3R5cGUubGFzdFBvc1ggPSAwO1xyXG5cdFx0VG91Y2hhYmxlQXJlYS5wcm90b3R5cGUubGFzdFBvc1kgPSAwO1xyXG5cdFx0VG91Y2hhYmxlQXJlYS5wcm90b3R5cGUudG91Y2hNb3ZlV3JhcHBlciA9IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHQvLyBGaXJlIHRoZSB1c2VyIHNwZWNpZmllZCBjYWxsYmFja1xyXG5cdFx0XHRpZiggdGhpcy50b3VjaE1vdmUgJiYgKCBlLmNsaWVudFggIT0gVG91Y2hhYmxlQXJlYS5wcm90b3R5cGUubGFzdFBvc1ggfHwgZS5jbGllbnRZICE9IFRvdWNoYWJsZUFyZWEucHJvdG90eXBlLmxhc3RQb3NZICkgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy50b3VjaE1vdmUoKTtcclxuXHRcdFx0XHR0aGlzLmxhc3RQb3NYID0gZS5jbGllbnRYO1xyXG5cdFx0XHRcdHRoaXMubGFzdFBvc1kgPSBlLmNsaWVudFk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gTWFyayB0aGlzIGRpcmVjdGlvbiBhcyBpbmFjdGl2ZVxyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9IHRydWU7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFNldHMgdGhlIHVzZXItc3BlY2lmaWVkIGNhbGxiYWNrIGZvciB0aGlzIGRpcmVjdGlvbiBubyBsb25nZXIgYmVpbmcgdG91Y2hlZFxyXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgXHJcblx0XHQgKi9cclxuXHRcdFRvdWNoYWJsZUFyZWEucHJvdG90eXBlLnNldFRvdWNoRW5kID0gZnVuY3Rpb24oIGNhbGxiYWNrICkge1xyXG5cdFx0XHR0aGlzLnRvdWNoRW5kID0gY2FsbGJhY2s7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIENhbGxlZCB3aGVuIHRoaXMgZGlyZWN0aW9uIGlzIGZpcnN0IHRvdWNoZWQgXHJcblx0XHQgKi9cclxuXHRcdFRvdWNoYWJsZUFyZWEucHJvdG90eXBlLnRvdWNoRW5kV3JhcHBlciA9IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHQvLyBGaXJlIHRoZSB1c2VyIHNwZWNpZmllZCBjYWxsYmFja1xyXG5cdFx0XHRpZiggdGhpcy50b3VjaEVuZCApXHJcblx0XHRcdFx0dGhpcy50b3VjaEVuZCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gTWFyayB0aGlzIGRpcmVjdGlvbiBhcyBpbmFjdGl2ZVxyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcclxuXHRcdFx0R2FtZUNvbnRyb2xsZXIucmVuZGVyKCk7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gVG91Y2hhYmxlQXJlYTtcclxuXHRcdFxyXG5cdH0gKSgpO1xyXG5cdFxyXG5cdHZhciBUb3VjaGFibGVEaXJlY3Rpb24gPSAoIGZ1bmN0aW9uKCBfX3N1cGVyICkge1xyXG5cdFx0X19leHRlbmRzKCBUb3VjaGFibGVEaXJlY3Rpb24sIF9fc3VwZXIgKTtcclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gVG91Y2hhYmxlRGlyZWN0aW9uKCBvcHRpb25zICkgXHJcblx0XHR7XHJcblx0XHRcdGZvciggdmFyIGkgaW4gb3B0aW9ucyApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiggaSA9PSAneCcgKVxyXG5cdFx0XHRcdFx0dGhpc1tpXSA9IEdhbWVDb250cm9sbGVyLmdldFBpeGVscyggb3B0aW9uc1tpXSwgJ3gnICk7XHJcblx0XHRcdFx0ZWxzZSBpZiggaSA9PSAneScgfHwgaSA9PSAnaGVpZ2h0JyB8fCBpID09ICd3aWR0aCcgKVxyXG5cdFx0XHRcdFx0dGhpc1tpXSA9IEdhbWVDb250cm9sbGVyLmdldFBpeGVscyggb3B0aW9uc1tpXSwgJ3knICk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0dGhpc1tpXSA9IG9wdGlvbnNbaV07XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuZHJhdygpO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0VG91Y2hhYmxlRGlyZWN0aW9uLnByb3RvdHlwZS50eXBlID0gJ2RpcmVjdGlvbic7XHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogQ2hlY2tzIGlmIHRoZSB0b3VjaCBpcyB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGlzIGRpcmVjdGlvbiBcclxuXHRcdCAqL1xyXG5cdFx0VG91Y2hhYmxlRGlyZWN0aW9uLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCB0b3VjaFgsIHRvdWNoWSApIHtcclxuXHRcdFx0dmFyIGRpc3RhbmNlWCwgZGlzdGFuY2VZO1xyXG5cdFx0XHRpZiggKCBNYXRoLmFicyggdG91Y2hYIC0gdGhpcy54ICkgPCAoIEdhbWVDb250cm9sbGVyLm9wdGlvbnMudG91Y2hSYWRpdXMgLyAyICkgfHwgKCB0b3VjaFggPiB0aGlzLnggKSApICYmIC8vIGxlZnRcclxuXHRcdFx0XHQoIE1hdGguYWJzKCB0b3VjaFggLSAoIHRoaXMueCArIHRoaXMud2lkdGggKSApIDwgKCBHYW1lQ29udHJvbGxlci5vcHRpb25zLnRvdWNoUmFkaXVzIC8gMiApIHx8ICggdG91Y2hYIDwgdGhpcy54ICsgdGhpcy53aWR0aCApICkgJiYgLy8gcmlnaHRcclxuXHRcdFx0XHQoIE1hdGguYWJzKCB0b3VjaFkgLSB0aGlzLnkgKSA8ICggR2FtZUNvbnRyb2xsZXIub3B0aW9ucy50b3VjaFJhZGl1cyAvIDIgKSB8fCAoIHRvdWNoWSA+IHRoaXMueSApICkgJiYgLy8gdG9wXHJcblx0XHRcdFx0KCBNYXRoLmFicyggdG91Y2hZIC0gKCB0aGlzLnkgKyB0aGlzLmhlaWdodCApICkgPCAoIEdhbWVDb250cm9sbGVyLm9wdGlvbnMudG91Y2hSYWRpdXMgLyAyICkgfHwgKCB0b3VjaFkgPCB0aGlzLnkgKyB0aGlzLmhlaWdodCApICkgLy8gYm90dG9tXHJcblx0XHRcdClcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0VG91Y2hhYmxlRGlyZWN0aW9uLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjYWNoZUlkID0gdGhpcy50eXBlICsgJycgKyB0aGlzLmlkICsgJycgKyB0aGlzLmFjdGl2ZTtcclxuXHRcdFx0dmFyIGNhY2hlZCA9IEdhbWVDb250cm9sbGVyLmNhY2hlZFNwcml0ZXNbIGNhY2hlSWQgXTtcclxuXHRcdFx0aWYoICEgY2FjaGVkIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBzdWJDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApO1xyXG5cdFx0XHRcdHZhciBjdHggPSBzdWJDYW52YXMuZ2V0Q29udGV4dCggJzJkJyApO1xyXG5cdFx0XHRcdHN1YkNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGggKyAyICogdGhpcy5zdHJva2U7XHJcblx0XHRcdFx0c3ViQ2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgMiAqIHRoaXMuc3Ryb2tlO1xyXG5cdFxyXG5cdFx0XHRcdHZhciBvcGFjaXR5ID0gdGhpcy5vcGFjaXR5IHx8IDAuOTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiggISB0aGlzLmFjdGl2ZSApIC8vIERpcmVjdGlvbiBjdXJyZW50bHkgYmVpbmcgdG91Y2hlZFxyXG5cdFx0XHRcdFx0b3BhY2l0eSAqPSAwLjU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRzd2l0Y2goIHRoaXMuZGlyZWN0aW9uIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjYXNlICd1cCc6XHJcblx0XHRcdFx0XHRcdHZhciBncmFkaWVudCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCggMCwgMCwgMCwgdGhpcy5oZWlnaHQgKTtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAwLCAncmdiYSggMCwgMCwgMCwgJyArICggb3BhY2l0eSAqIDAuNSApICsgJyApJyApO1xyXG5cdFx0XHRcdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoIDEsICdyZ2JhKCAwLCAwLCAwLCAnICsgb3BhY2l0eSArICcgKScgKTsgICBcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdsZWZ0JzpcclxuXHRcdFx0XHRcdFx0dmFyIGdyYWRpZW50ID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KCAwLCAwLCB0aGlzLndpZHRoLCAwICk7XHJcblx0XHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMCwgJ3JnYmEoIDAsIDAsIDAsICcgKyAoIG9wYWNpdHkgKiAwLjUgKSArICcgKScgKTtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAxLCAncmdiYSggMCwgMCwgMCwgJyArIG9wYWNpdHkgKyAnICknICk7ICAgXHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAncmlnaHQnOlxyXG5cdFx0XHRcdFx0XHR2YXIgZ3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoIDAsIDAsIHRoaXMud2lkdGgsIDAgKTtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAwLCAncmdiYSggMCwgMCwgMCwgJyArIG9wYWNpdHkgKyAnICknICk7XHJcblx0XHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMSwgJ3JnYmEoIDAsIDAsIDAsICcgKyAoIG9wYWNpdHkgKiAwLjUgKSArICcgKScgKTsgIFxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ2Rvd24nOlxyXG5cdFx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdFx0dmFyIGdyYWRpZW50ID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KCAwLCAwLCAwLCB0aGlzLmhlaWdodCApO1xyXG5cdFx0XHRcdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoIDAsICdyZ2JhKCAwLCAwLCAwLCAnICsgb3BhY2l0eSArICcgKScgKTtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAxLCAncmdiYSggMCwgMCwgMCwgJyArICggb3BhY2l0eSAqIDAuNSApICsgJyApJyApOyAgIFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XHJcblx0XHRcclxuXHRcdFx0XHRjdHguZmlsbFJlY3QoIDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0ICk7XHJcblx0XHRcdFx0Y3R4LmxpbmVXaWR0aCA9IHRoaXMuc3Ryb2tlO1xyXG5cdFx0XHRcdGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKCAyNTUsIDI1NSwgMjU1LCAwLjEgKSc7XHJcblx0XHRcdFx0Y3R4LnN0cm9rZVJlY3QoIDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0ICk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2FjaGVkID0gR2FtZUNvbnRyb2xsZXIuY2FjaGVkU3ByaXRlc1sgY2FjaGVJZCBdID0gc3ViQ2FudmFzO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRHYW1lQ29udHJvbGxlci5jdHguZHJhd0ltYWdlKCBjYWNoZWQsIHRoaXMueCwgdGhpcy55ICk7XHJcblx0XHRcdFx0XHJcblx0XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gVG91Y2hhYmxlRGlyZWN0aW9uO1xyXG5cdH0gKSggVG91Y2hhYmxlQXJlYSApO1xyXG5cdFxyXG5cdHZhciBUb3VjaGFibGVCdXR0b24gPSAoIGZ1bmN0aW9uKCBfX3N1cGVyICkge1xyXG5cdFx0X19leHRlbmRzKCBUb3VjaGFibGVCdXR0b24sIF9fc3VwZXIgKTtcclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gVG91Y2hhYmxlQnV0dG9uKCBvcHRpb25zICkgLy94LCB5LCByYWRpdXMsIGJhY2tncm91bmRDb2xvciApXHJcblx0XHR7XHJcblx0XHRcdGZvciggdmFyIGkgaW4gb3B0aW9ucyApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiggaSA9PSAneCcgKVxyXG5cdFx0XHRcdFx0dGhpc1tpXSA9IEdhbWVDb250cm9sbGVyLmdldFBpeGVscyggb3B0aW9uc1tpXSwgJ3gnICk7XHJcblx0XHRcdFx0ZWxzZSBpZiggaSA9PSAneCcgfHwgaSA9PSAncmFkaXVzJyApXHJcblx0XHRcdFx0XHR0aGlzW2ldID0gR2FtZUNvbnRyb2xsZXIuZ2V0UGl4ZWxzKCBvcHRpb25zW2ldLCAneScgKTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHR0aGlzW2ldID0gb3B0aW9uc1tpXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5kcmF3KCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdFRvdWNoYWJsZUJ1dHRvbi5wcm90b3R5cGUudHlwZSA9ICdidXR0b24nO1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIENoZWNrcyBpZiB0aGUgdG91Y2ggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhpcyBkaXJlY3Rpb24gXHJcblx0XHQgKi9cclxuXHRcdFRvdWNoYWJsZUJ1dHRvbi5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiggdG91Y2hYLCB0b3VjaFkgKSB7XHJcblx0XHRcdGlmKCBcclxuXHRcdFx0XHQoIE1hdGguYWJzKCB0b3VjaFggLSB0aGlzLnggKSA8IHRoaXMucmFkaXVzICsgKCBHYW1lQ29udHJvbGxlci5vcHRpb25zLnRvdWNoUmFkaXVzIC8gMiApICkgJiZcclxuXHRcdFx0XHQoIE1hdGguYWJzKCB0b3VjaFkgLSB0aGlzLnkgKSA8IHRoaXMucmFkaXVzICsgKCBHYW1lQ29udHJvbGxlci5vcHRpb25zLnRvdWNoUmFkaXVzIC8gMiApIClcclxuXHRcdFx0KVxyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRUb3VjaGFibGVCdXR0b24ucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNhY2hlSWQgPSB0aGlzLnR5cGUgKyAnJyArIHRoaXMuaWQgKyAnJyArIHRoaXMuYWN0aXZlO1xyXG5cdFx0XHR2YXIgY2FjaGVkID0gR2FtZUNvbnRyb2xsZXIuY2FjaGVkU3ByaXRlc1sgY2FjaGVJZCBdO1xyXG5cdFx0XHRpZiggISBjYWNoZWQgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIHN1YkNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7XHJcblx0XHRcdFx0dmFyIGN0eCA9IHN1YkNhbnZhcy5nZXRDb250ZXh0KCAnMmQnICk7XHJcblx0XHRcdFx0Y3R4LmxpbmVXaWR0aCA9IHRoaXMuc3Ryb2tlO1xyXG5cdFx0XHRcdHN1YkNhbnZhcy53aWR0aCA9IHN1YkNhbnZhcy5oZWlnaHQgPSAyICogKCB0aGlzLnJhZGl1cyArIGN0eC5saW5lV2lkdGggKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgZ3JhZGllbnQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoIHRoaXMucmFkaXVzLCB0aGlzLnJhZGl1cywgMSwgdGhpcy5yYWRpdXMsIHRoaXMucmFkaXVzLCB0aGlzLnJhZGl1cyApO1xyXG5cdFx0XHRcdHZhciB0ZXh0U2hhZG93Q29sb3I7XHJcblx0XHRcdFx0c3dpdGNoKCB0aGlzLmJhY2tncm91bmRDb2xvciApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Y2FzZSAnYmx1ZSc6XHJcblx0XHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMCwgJ3JnYmEoMTIzLCAxODEsIDE5NywgMC42KScgKTtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAxLCAnIzEwNWE3OCcgKTtcclxuXHRcdFx0XHRcdFx0dGV4dFNoYWRvd0NvbG9yID0gJyMwQTQ4NjEnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ2dyZWVuJzpcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAwLCAncmdiYSgyOSwgMjAxLCAzNiwgMC42KScgKTtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAxLCAnIzEwNzgxNCcgKTtcclxuXHRcdFx0XHRcdFx0dGV4dFNoYWRvd0NvbG9yID0gJyMwODVDMEInO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ3JlZCc6XHJcblx0XHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMCwgJ3JnYmEoMTY1LCAzNCwgMzQsIDAuNiknICk7XHJcblx0XHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMSwgJyM1MjAxMDEnICk7XHJcblx0XHRcdFx0XHRcdHRleHRTaGFkb3dDb2xvciA9ICcjMzMwMDAwJztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICd5ZWxsb3cnOlxyXG5cdFx0XHRcdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoIDAsICdyZ2JhKDIxOSwgMjE3LCA1OSwgMC42KScgKTtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAxLCAnI0U4RTEwRScgKTtcclxuXHRcdFx0XHRcdFx0dGV4dFNoYWRvd0NvbG9yID0gJyNCREI2MDAnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ3doaXRlJzpcclxuXHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMCwgJ3JnYmEoIDI1NSwyNTUsMjU1LC4zICknICk7XHJcblx0XHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMSwgJyNlZWUnICk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdGlmKCB0aGlzLmFjdGl2ZSApXHRcdFx0XHJcblx0XHRcdFx0XHRjdHguZmlsbFN0eWxlID0gdGV4dFNoYWRvd0NvbG9yO1xyXG5cdFx0XHRcdGVsc2VcdFxyXG5cdFx0XHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xyXG5cdFxyXG5cdFx0XHRcdGN0eC5zdHJva2VTdHlsZSA9IHRleHRTaGFkb3dDb2xvcjtcdFx0XHRcclxuXHRcdFxyXG5cdFx0XHRcdGN0eC5iZWdpblBhdGgoKTtcclxuXHRcdFx0XHQvL2N0eC5hcmMoIHRoaXMueCwgdGhpcy55LCB0aGlzLnJhZGl1cywgMCAsIDIgKiBNYXRoLlBJLCBmYWxzZSApO1xyXG5cdFx0XHRcdGN0eC5hcmMoIHN1YkNhbnZhcy53aWR0aCAvIDIsIHN1YkNhbnZhcy53aWR0aCAvIDIsIHRoaXMucmFkaXVzLCAwICwgMiAqIE1hdGguUEksIGZhbHNlICk7XHJcblx0XHRcdFx0Y3R4LmZpbGwoKTtcclxuXHRcdFx0XHRjdHguc3Ryb2tlKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYoIHRoaXMubGFiZWwgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdC8vIFRleHQgU2hhZG93XHJcblx0XHRcdFx0XHRjdHguZmlsbFN0eWxlID0gdGV4dFNoYWRvd0NvbG9yO1xyXG5cdFx0XHRcdFx0Y3R4LmZvbnQgPSAnYm9sZCAnICsgKCB0aGlzLmZvbnRTaXplIHx8IHN1YkNhbnZhcy5oZWlnaHQgKiAwLjM1ICkgKyAncHggVmVyZGFuYSc7XHJcblx0XHRcdFx0XHRjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcblx0XHRcdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcblx0XHRcdFx0XHRjdHguZmlsbFRleHQoIHRoaXMubGFiZWwsIHN1YkNhbnZhcy5oZWlnaHQgLyAyICsgMiwgc3ViQ2FudmFzLmhlaWdodCAvIDIgKyAyICk7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0XHRcdFx0Y3R4LmZpbGxTdHlsZSA9IHRoaXMuZm9udENvbG9yO1xyXG5cdFx0XHRcdFx0Y3R4LmZvbnQgPSAnYm9sZCAnICsgKCB0aGlzLmZvbnRTaXplIHx8IHN1YkNhbnZhcy5oZWlnaHQgKiAwLjM1ICkgKyAncHggVmVyZGFuYSc7XHJcblx0XHRcdFx0XHRjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcblx0XHRcdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcblx0XHRcdFx0XHRjdHguZmlsbFRleHQoIHRoaXMubGFiZWwsIHN1YkNhbnZhcy5oZWlnaHQgLyAyLCBzdWJDYW52YXMuaGVpZ2h0IC8gMiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjYWNoZWQgPSBHYW1lQ29udHJvbGxlci5jYWNoZWRTcHJpdGVzWyBjYWNoZUlkIF0gPSBzdWJDYW52YXM7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdEdhbWVDb250cm9sbGVyLmN0eC5kcmF3SW1hZ2UoIGNhY2hlZCwgdGhpcy54LCB0aGlzLnkgKTtcclxuXHRcdFx0XHJcblx0XHRcdFxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIFRvdWNoYWJsZUJ1dHRvbjtcclxuXHR9ICkoIFRvdWNoYWJsZUFyZWEgKTtcclxuXHRcclxuXHR2YXIgVG91Y2hhYmxlSm95c3RpY2sgPSAoIGZ1bmN0aW9uKCBfX3N1cGVyICkge1xyXG5cdFx0X19leHRlbmRzKCBUb3VjaGFibGVKb3lzdGljaywgX19zdXBlciApO1xyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBUb3VjaGFibGVKb3lzdGljayggb3B0aW9ucyApIC8veCwgeSwgcmFkaXVzLCBiYWNrZ3JvdW5kQ29sb3IgKVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IoIHZhciBpIGluIG9wdGlvbnMgKVxyXG5cdFx0XHRcdHRoaXNbaV0gPSBvcHRpb25zW2ldO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHR0aGlzLmN1cnJlbnRYID0gdGhpcy5jdXJyZW50WCB8fCB0aGlzLng7XHJcblx0XHRcdHRoaXMuY3VycmVudFkgPSB0aGlzLmN1cnJlbnRZIHx8IHRoaXMueTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0VG91Y2hhYmxlSm95c3RpY2sucHJvdG90eXBlLnR5cGUgPSAnam95c3RpY2snO1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIENoZWNrcyBpZiB0aGUgdG91Y2ggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhpcyBkaXJlY3Rpb24gXHJcblx0XHQgKi9cclxuXHRcdFRvdWNoYWJsZUpveXN0aWNrLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCB0b3VjaFgsIHRvdWNoWSApIHtcclxuXHRcdFx0aWYoIFxyXG5cdFx0XHRcdCggTWF0aC5hYnMoIHRvdWNoWCAtIHRoaXMueCApIDwgdGhpcy5yYWRpdXMgKyAoIEdhbWVDb250cm9sbGVyLm9wdGlvbnMudG91Y2hSYWRpdXMgLyAyICkgKSAmJlxyXG5cdFx0XHRcdCggTWF0aC5hYnMoIHRvdWNoWSAtIHRoaXMueSApIDwgdGhpcy5yYWRpdXMgKyAoIEdhbWVDb250cm9sbGVyLm9wdGlvbnMudG91Y2hSYWRpdXMgLyAyICkgKVxyXG5cdFx0XHQpXHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogZGV0YWlscyBmb3IgdGhlIGpveXN0aWNrIG1vdmUgZXZlbnQsIHN0b3JlZCBoZXJlIHNvIHdlJ3JlIG5vdCBjb25zdGFudGx5IGNyZWF0aW5nIG5ldyBvYmpzIGZvciBnYXJiYWdlLiBUaGUgb2JqZWN0IGhhcyBwYXJhbXM6XHJcblx0XHQgKiBkeCAtIHRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjdXJyZW50IGpveXN0aWNrIGNlbnRlciBpcyBmcm9tIHRoZSBiYXNlIGNlbnRlciBpbiB4IGRpcmVjdGlvblxyXG5cdFx0ICogZHkgLSB0aGUgbnVtYmVyIG9mIHBpeGVscyB0aGUgY3VycmVudCBqb3lzdGljayBjZW50ZXIgaXMgZnJvbSB0aGUgYmFzZSBjZW50ZXIgaW4geSBkaXJlY3Rpb25cclxuXHRcdCAqIG1heCAtIHRoZSBtYXhpbXVtIG51bWJlciBvZiBwaXhlbHMgZHggb3IgZHkgY2FuIGJlXHJcblx0XHQgKiBub3JtYWxpemVkWCAtIGEgbnVtYmVyIGJldHdlZW4gLTEgYW5kIDEgcmVsYXRpbmcgdG8gaG93IGZhciBsZWZ0IG9yIHJpZ2h0IHRoZSBqb3lzdGljayBpc1xyXG5cdFx0ICogbm9ybWFsaXplZFkgLSBhIG51bWJlciBiZXR3ZWVuIC0xIGFuZCAxIHJlbGF0aW5nIHRvIGhvdyBmYXIgdXAgb3IgZG93biB0aGUgam95c3RpY2sgaXNcclxuXHRcdCAqL1xyXG5cdFx0VG91Y2hhYmxlSm95c3RpY2sucHJvdG90eXBlLm1vdmVEZXRhaWxzID0ge307XHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogQ2FsbGVkIHdoZW4gdGhpcyBqb3lzdGljayBpcyBtb3ZlZFxyXG5cdFx0ICovXHJcblx0XHRUb3VjaGFibGVKb3lzdGljay5wcm90b3R5cGUudG91Y2hNb3ZlV3JhcHBlciA9IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRYID0gR2FtZUNvbnRyb2xsZXIubm9ybWFsaXplVG91Y2hQb3NpdGlvblgoIGUuY2xpZW50WCApO1x0XHJcblx0XHRcdHRoaXMuY3VycmVudFkgPSBHYW1lQ29udHJvbGxlci5ub3JtYWxpemVUb3VjaFBvc2l0aW9uWSggZS5jbGllbnRZICk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBGaXJlIHRoZSB1c2VyIHNwZWNpZmllZCBjYWxsYmFja1xyXG5cdFx0XHRpZiggdGhpcy50b3VjaE1vdmUgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIHRoaXMubW92ZURldGFpbHMuZHggIT0gdGhpcy5jdXJyZW50WCAtIHRoaXMueCAmJiB0aGlzLm1vdmVEZXRhaWxzLmR5ICE9IHRoaXMueSAtIHRoaXMuY3VycmVudFkgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRoaXMubW92ZURldGFpbHMuZHggPSB0aGlzLmN1cnJlbnRYIC0gdGhpcy54OyAvLyByZXZlcnNlIHNvIHJpZ2h0IGlzIHBvc2l0aXZlXHJcblx0XHRcdFx0XHR0aGlzLm1vdmVEZXRhaWxzLmR5ID0gdGhpcy55IC0gdGhpcy5jdXJyZW50WTtcclxuXHRcdFx0XHRcdHRoaXMubW92ZURldGFpbHMubWF4ID0gdGhpcy5yYWRpdXMgKyAoIEdhbWVDb250cm9sbGVyLm9wdGlvbnMudG91Y2hSYWRpdXMgLyAyICk7XHJcblx0XHRcdFx0XHR0aGlzLm1vdmVEZXRhaWxzLm5vcm1hbGl6ZWRYID0gdGhpcy5tb3ZlRGV0YWlscy5keCAvIHRoaXMubW92ZURldGFpbHMubWF4O1xyXG5cdFx0XHRcdFx0dGhpcy5tb3ZlRGV0YWlscy5ub3JtYWxpemVkWSA9IHRoaXMubW92ZURldGFpbHMuZHkgLyB0aGlzLm1vdmVEZXRhaWxzLm1heDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR0aGlzLnRvdWNoTW92ZSggdGhpcy5tb3ZlRGV0YWlscyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gTWFyayB0aGlzIGRpcmVjdGlvbiBhcyBpbmFjdGl2ZVxyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9IHRydWU7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRUb3VjaGFibGVKb3lzdGljay5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiggISB0aGlzLmlkICkgLy8gd2FpdCB1bnRpbCBpZCBpcyBzZXRcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHJcblx0XHRcdHZhciBjYWNoZUlkID0gdGhpcy50eXBlICsgJycgKyB0aGlzLmlkICsgJycgKyB0aGlzLmFjdGl2ZTtcclxuXHRcdFx0dmFyIGNhY2hlZCA9IEdhbWVDb250cm9sbGVyLmNhY2hlZFNwcml0ZXNbIGNhY2hlSWQgXTtcclxuXHRcdFx0aWYoICEgY2FjaGVkIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBzdWJDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApO1xyXG5cdFx0XHRcdHRoaXMuc3Ryb2tlID0gdGhpcy5zdHJva2UgfHwgMjtcclxuXHRcdFx0XHRzdWJDYW52YXMud2lkdGggPSBzdWJDYW52YXMuaGVpZ2h0ID0gMiAqICggdGhpcy5yYWRpdXMgKyB0aGlzLnN0cm9rZSApO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBjdHggPSBzdWJDYW52YXMuZ2V0Q29udGV4dCggJzJkJyApO1xyXG5cdFx0XHRcdGN0eC5saW5lV2lkdGggPSB0aGlzLnN0cm9rZTtcclxuXHRcdFx0XHRpZiggdGhpcy5hY3RpdmUgKSAvLyBEaXJlY3Rpb24gY3VycmVudGx5IGJlaW5nIHRvdWNoZWRcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgZ3JhZGllbnQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoIDAsIDAsIDEsIDAsIDAsIHRoaXMucmFkaXVzICk7XHJcblx0XHRcdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoIDAsICdyZ2JhKCAyMDAsMjAwLDIwMCwuNSApJyApO1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAxLCAncmdiYSggMjAwLDIwMCwyMDAsLjkgKScgKTtcclxuXHRcdFx0XHRcdGN0eC5zdHJva2VTdHlsZSA9ICcjMDAwJztcclxuXHRcdFx0XHR9XHRcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Ly8gU1RZTElORyBGT1IgQlVUVE9OU1xyXG5cdFx0XHRcdFx0dmFyIGdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KCAwLCAwLCAxLCAwLCAwLCB0aGlzLnJhZGl1cyApO1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKCAwLCAncmdiYSggMjAwLDIwMCwyMDAsLjIgKScgKTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCggMSwgJ3JnYmEoIDIwMCwyMDAsMjAwLC40ICknICk7XHJcblx0XHRcdFx0XHRjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSggMCwwLDAsLjQgKSc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGN0eC5maWxsU3R5bGUgPSBncmFkaWVudDtcclxuXHRcdFx0XHQvLyBBY3R1YWwgam95c3RpY2sgcGFydCB0aGF0IGlzIGJlaW5nIG1vdmVkXHJcblx0XHRcdFx0Y3R4LmJlZ2luUGF0aCgpO1xyXG5cdFx0XHRcdGN0eC5hcmMoIHRoaXMucmFkaXVzLCB0aGlzLnJhZGl1cywgdGhpcy5yYWRpdXMsIDAgLCAyICogTWF0aC5QSSwgZmFsc2UgKTtcclxuXHRcdFx0XHRjdHguZmlsbCgpO1xyXG5cdFx0XHRcdGN0eC5zdHJva2UoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjYWNoZWQgPSBHYW1lQ29udHJvbGxlci5jYWNoZWRTcHJpdGVzWyBjYWNoZUlkIF0gPSBzdWJDYW52YXM7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIERyYXcgdGhlIGJhc2UgdGhhdCBzdGF5cyBzdGF0aWNcclxuXHRcdFx0R2FtZUNvbnRyb2xsZXIuY3R4LmZpbGxTdHlsZSA9ICcjNDQ0JztcclxuXHRcdFx0R2FtZUNvbnRyb2xsZXIuY3R4LmJlZ2luUGF0aCgpO1xyXG5cdFx0XHRHYW1lQ29udHJvbGxlci5jdHguYXJjKCB0aGlzLngsIHRoaXMueSwgdGhpcy5yYWRpdXMgKiAwLjcsIDAgLCAyICogTWF0aC5QSSwgZmFsc2UgKTtcclxuXHRcdFx0R2FtZUNvbnRyb2xsZXIuY3R4LmZpbGwoKTtcclxuXHRcdFx0R2FtZUNvbnRyb2xsZXIuY3R4LnN0cm9rZSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0R2FtZUNvbnRyb2xsZXIuY3R4LmRyYXdJbWFnZSggY2FjaGVkLCB0aGlzLmN1cnJlbnRYIC0gdGhpcy5yYWRpdXMsIHRoaXMuY3VycmVudFkgLSB0aGlzLnJhZGl1cyApO1xyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gVG91Y2hhYmxlSm95c3RpY2s7XHJcblx0fSApKCBUb3VjaGFibGVBcmVhICk7XHJcblx0XHJcblx0XHJcblx0dmFyIFRvdWNoYWJsZUNpcmNsZSA9ICggZnVuY3Rpb24oIF9fc3VwZXIgKSB7XHJcblx0XHRfX2V4dGVuZHMoIFRvdWNoYWJsZUNpcmNsZSwgX19zdXBlciApO1xyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBUb3VjaGFibGVDaXJjbGUoIG9wdGlvbnMgKVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IoIHZhciBpIGluIG9wdGlvbnMgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIGkgPT0gJ3gnIClcclxuXHRcdFx0XHRcdHRoaXNbaV0gPSBHYW1lQ29udHJvbGxlci5nZXRQaXhlbHMoIG9wdGlvbnNbaV0sICd4JyApO1xyXG5cdFx0XHRcdGVsc2UgaWYoIGkgPT0gJ3gnIHx8IGkgPT0gJ3JhZGl1cycgKVxyXG5cdFx0XHRcdFx0dGhpc1tpXSA9IEdhbWVDb250cm9sbGVyLmdldFBpeGVscyggb3B0aW9uc1tpXSwgJ3knICk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0dGhpc1tpXSA9IG9wdGlvbnNbaV07XHJcblx0XHRcdH1cclxuXHRcclxuXHRcdFx0dGhpcy5kcmF3KCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogTm8gdG91Y2ggZm9yIHRoaXMgZmVsbGEgXHJcblx0XHQgKi9cclxuXHRcdFRvdWNoYWJsZUNpcmNsZS5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiggdG91Y2hYLCB0b3VjaFkgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdFRvdWNoYWJsZUNpcmNsZS5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdFx0XHQvLyBTVFlMSU5HIEZPUiBCVVRUT05TXHJcblx0XHRcdEdhbWVDb250cm9sbGVyLmN0eC5maWxsU3R5bGUgPSAncmdiYSggMCwgMCwgMCwgMC41ICknO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWN0dWFsIGpveXN0aWNrIHBhcnQgdGhhdCBpcyBiZWluZyBtb3ZlZFxyXG5cdFx0XHRHYW1lQ29udHJvbGxlci5jdHguYmVnaW5QYXRoKCk7XHJcblx0XHRcdEdhbWVDb250cm9sbGVyLmN0eC5hcmMoIHRoaXMueCwgdGhpcy55LCB0aGlzLnJhZGl1cywgMCAsIDIgKiBNYXRoLlBJLCBmYWxzZSApO1xyXG5cdFx0XHRHYW1lQ29udHJvbGxlci5jdHguZmlsbCgpO1xyXG5cdFxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIFRvdWNoYWJsZUNpcmNsZTtcclxuXHR9ICkoIFRvdWNoYWJsZUFyZWEgKTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBTaGltIGZvciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgXHJcblx0ICovXHJcblx0KCBmdW5jdGlvbigpIHtcclxuXHQgIGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm5cclxuXHRcdHZhciBsYXN0VGltZSA9IDA7XHJcblx0XHR2YXIgdmVuZG9ycyA9IFsnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJ107XHJcblx0XHRmb3IoIHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3ggKVxyXG5cdFx0e1xyXG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ1JlcXVlc3RBbmltYXRpb25GcmFtZSddO1xyXG5cdFx0XHR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSsnQ2FuY2VsQW5pbWF0aW9uRnJhbWUnXSBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgfHwgd2luZG93W3ZlbmRvcnNbeF0rJ0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSddO1xyXG5cdFx0fVxyXG5cdCBcclxuXHRcdGlmICggIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKVxyXG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oIGNhbGxiYWNrLCBlbGVtZW50ICkge1xyXG5cdFx0XHRcdHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0XHRcdHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoIDAsIDE2IC0gKCBjdXJyVGltZSAtIGxhc3RUaW1lICkgKTtcclxuXHRcdFx0XHR2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7IGNhbGxiYWNrKGN1cnJUaW1lICsgdGltZVRvQ2FsbCk7IH0sIFxyXG5cdFx0XHRcdFx0dGltZVRvQ2FsbCApO1xyXG5cdFx0XHRcdGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsO1xyXG5cdFx0XHRcdHJldHVybiBpZDtcclxuXHRcdFx0fTtcclxuXHQgXHJcblx0XHRpZiAoICF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgKVxyXG5cdFx0XHR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiggaWQgKSB7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCBpZCApO1xyXG5cdFx0XHR9O1xyXG5cdH0oKSApO1xyXG59ICkodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiA/IG1vZHVsZS5leHBvcnRzIDogd2luZG93KSIsInZhciBnbG9iYWxzID0ge1xyXG4gICAgYnVsbGV0czogbnVsbCxcclxuICAgIGVuZW1pZXM6IG51bGwsXHJcbiAgICBwbGF5ZXI6IG51bGxcclxufVxyXG52YXIgdXBkYXRlID0gcmVxdWlyZSgnLi9nYW1lL3VwZGF0ZScpO1xyXG52YXIgcHJlbG9hZCA9IHJlcXVpcmUoJy4vZ2FtZS9wcmVsb2FkJykgO1xyXG52YXIgY3JlYXRlID0gcmVxdWlyZSgnLi9nYW1lL2NyZWF0ZScpO1xyXG4gXHJcbnZhciBnYW1lID0gd2luZG93LmdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoODAwLCA2MDAsIFBoYXNlci5BVVRPLCAnJywgeyBwcmVsb2FkOiBwcmVsb2FkLCBjcmVhdGU6IGNyZWF0ZSwgdXBkYXRlOiB1cGRhdGUgfSk7XHJcbiIsIiBmdW5jdGlvbiByZXNldEJ1bGxldCAoYnVsbGV0KSB7XHJcblxyXG4gICAgYnVsbGV0LmtpbGwoKTtcclxuXHJcbn1cclxuO1xyXG5mdW5jdGlvbiBzZXR1cEVuZW15IChlbmVteSkge1xyXG5cclxuICAgIGVuZW15LmFuY2hvci54ID0gMC41O1xyXG4gICAgZW5lbXkuYW5jaG9yLnkgPSAwLjU7XHJcbiAgICBlbmVteS5hbmltYXRpb25zLmFkZCgnZXhwbG9kZScpO1xyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gICAgZnVuY3Rpb24oKXtcclxuXHJcbiAgICBnYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcclxuXHJcbiAgICB0aGlzLnNwYWNlQkcgPSAgdGhpcy5hZGQudGlsZVNwcml0ZSgwLCAwLCA4MDAsIDYwMCwgJ2JnJyk7ICBcclxuICAgIHRoaXMuc3BhY2VCRy5hdXRvU2Nyb2xsKDAsIDc1KTsgXHJcblxyXG5cclxuICAgIGdhbWUuaW5wdXQuZ2FtZXBhZC5zdGFydCgpO1xyXG5cclxuICAgIC8vIFRvIGxpc3RlbiB0byBidXR0b25zIGZyb20gYSBzcGVjaWZpYyBwYWQgbGlzdGVuIGRpcmVjdGx5IG9uIHRoYXQgcGFkIGdhbWUuaW5wdXQuZ2FtZXBhZC5wYWRYLCB3aGVyZSBYID0gcGFkIDEtNFxyXG4gICAgLy92YXIgcGFkMSA9IGdhbWUuaW5wdXQuZ2FtZXBhZC5wYWQxO1xyXG5cclxuICAgIFxyXG4gICAgdmFyIEdhbWVDb250cm9sbGVyID0gd2luZG93LkdhbWVDb250cm9sbGVyID0gcmVxdWlyZSgnZ2FtZS1jb250cm9sbGVyJykuR2FtZUNvbnRyb2xsZXI7XHJcblxyXG5cclxuICAgIEdhbWVDb250cm9sbGVyLmluaXQoe1xyXG4gICAgICAgIGxlZnQ6IHtcclxuICAgICAgICAgICAgdHlwZTogJ2pveXN0aWNrJyxcclxuICAgICAgICAgICAgam95c3RpY2s6IHtcclxuICAgICAgICAgICAgICAgIHRvdWNoU3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IG5lZWQgdGhpcywgYnV0IHRoZSBldmVudCBpcyBoZXJlIGlmIHlvdSB3YW50IGl0LlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRvdWNoTW92ZTogZnVuY3Rpb24oam95c3RpY2tfZGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaW5wdXQuam95c3RpY2tMZWZ0ID0gam95c3RpY2tfZGV0YWlscztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0b3VjaEVuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pbnB1dC5qb3lzdGlja0xlZnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICByaWdodDoge1xyXG4gICAgICAgICAgICAvLyBXZSdyZSBub3QgdXNpbmcgYW55dGhpbmcgb24gdGhlIHJpZ2h0IGZvciB0aGlzIGRlbW8sIGJ1dCB5b3UgY2FuIGFkZCBidXR0b25zLCBldGMuXHJcbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXVzdGluaGFsbG9jay9odG1sNS12aXJ0dWFsLWdhbWUtY29udHJvbGxlci8gZm9yIGV4YW1wbGVzLlxyXG4gICAgICAgICAgICB0eXBlOiAnbm9uZSdcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cucGxheWVyID0gcmVxdWlyZSgnLi9wbGF5ZXInKShnYW1lKTtcclxuICAgIHBsYXllci5pbml0KCk7XHJcbiAgICB2YXIgYnVsbGV0cyA9IHdpbmRvdy5idWxsZXRzID0gdGhpcy5hZGQuZ3JvdXAoKTtcclxuXHJcbiAgICBidWxsZXRzLmVuYWJsZUJvZHkgPSB0cnVlO1xyXG5cclxuICAgIGJ1bGxldHMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuQVJDQURFO1xyXG5cclxuICAgIGJ1bGxldHMuY3JlYXRlTXVsdGlwbGUoMTAsICdidWxsZXRzJywgJ2J1bGxldC1ncmVlbi5wbmcnKTtcclxuICAgIGJ1bGxldHMuc2V0QWxsKCdhbmNob3IueCcsIDAuNSk7XHJcbiAgICBidWxsZXRzLnNldEFsbCgnYW5jaG9yLnknLCAxKTtcclxuICAgIGJ1bGxldHMuc2V0QWxsKCdvdXRPZkJvdW5kc0tpbGwnLCB0cnVlKTtcclxuICAgIGJ1bGxldHMuc2V0QWxsKCdjaGVja1dvcmxkQm91bmRzJywgdHJ1ZSk7XHJcblxyXG4gICAgXHJcblxyXG5cclxuICAgIHdpbmRvdy5leHBsb3Npb25zID0gZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICAgIGV4cGxvc2lvbnMuY3JlYXRlTXVsdGlwbGUoMzAsICdleHBsb2RlJyk7XHJcbiAgICBleHBsb3Npb25zLmZvckVhY2goc2V0dXBFbmVteSwgdGhpcyk7XHJcbiAgICB3aW5kb3cubXVzaWMgPSBnYW1lLmFkZC5hdWRpbygnc3RhZ2UtMScpOyBcclxuICAgIHdpbmRvdy5leHBsb3Npb25zU21hbGxlc3QgPSBnYW1lLmFkZC5ncm91cCgpO1xyXG4gICAgZXhwbG9zaW9uc1NtYWxsZXN0LmNyZWF0ZU11bHRpcGxlKDMwLCAnZXhwbG9kZS1zbWFsbGVzdCcpO1xyXG4gICAgZXhwbG9zaW9uc1NtYWxsZXN0LmZvckVhY2goc2V0dXBFbmVteSwgdGhpcyk7XHJcbiAgICBcclxuXHJcblxyXG4gICAgd2luZG93LmJvb20gPSBnYW1lLmFkZC5hdWRpbygnYm9vbScpO1xyXG4gICAgd2luZG93LmxhemVyID0gZ2FtZS5hZGQuYXVkaW8oJ2xhemVyJyk7XHJcblxyXG4gICAgXHJcbiAgICB3aW5kb3cuc3RhZ2UxID0gcmVxdWlyZSgnLi9zY2VuZXMvc2NlbmUtMScpKGdhbWUpO1xyXG4gICAgc3RhZ2UxLmluaXQoKTtcclxufVxyXG5cclxuICIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGdhbWUpIHtcclxuXHR2YXIgcGxheWVyLCBjdXJzb3JzO1xyXG5cdHZhciByaWdodF9idWxsZXRUaW1lID0gMCwgbGVmdF9idWxsZXRUaW1lID0gMDsgXHJcbiAgICB2YXIgcGxheWVyU3BlZWQgPSAyMDA7IC8vZHVubm9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmlyZUJ1bGxldCAoKSB7IFxyXG4gICAgICAgICAgICBpZiAoIGdhbWUudGltZS5ub3cgPiByaWdodF9idWxsZXRUaW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmlnaHRfYnVsbGV0ID0gYnVsbGV0cy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRfYnVsbGV0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICBBbmQgZmlyZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0X2J1bGxldC5yZXNldChwbGF5ZXIueCwgcGxheWVyLnkgKyAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRfYnVsbGV0LmJvZHkudmVsb2NpdHkueSA9IC0zMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRfYnVsbGV0VGltZSA9IGdhbWUudGltZS5ub3cgKyAxMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbGF6ZXIucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggZ2FtZS50aW1lLm5vdyA+IGxlZnRfYnVsbGV0VGltZSArIDIwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVmdF9idWxsZXQgPSBidWxsZXRzLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZWZ0X2J1bGxldClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgQW5kIGZpcmUgaXRcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0X2J1bGxldC5yZXNldChwbGF5ZXIueCArIDI2LCBwbGF5ZXIueSArIDE2KTtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0X2J1bGxldC5ib2R5LnZlbG9jaXR5LnkgPSAtMzAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRfYnVsbGV0VGltZSA9IGdhbWUudGltZS5ub3cgKyAxMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbGF6ZXIucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdCA6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0cGxheWVyID0gZ2FtZS5hZGQuc3ByaXRlKCg0MDAgLSAxNiksIDUwMCwgJ3NoaXAnKTtcclxuICAgIFx0XHRnYW1lLnBoeXNpY3MuZW5hYmxlKHBsYXllciwgUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcclxuICAgIFx0XHRjdXJzb3JzID0gIGdhbWUuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xyXG5cdFx0fSxcclxuXHRcdHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL0tFWUJPQVJEIE1PVkVNRU5UXHJcblx0ICAgICAgICBpZiAoY3Vyc29ycy51cC5pc0Rvd24pXHJcblx0ICAgICAgICB7XHJcblx0ICAgICAgICAgICAgLy8gIElmIHRoZSBzaGlmdCBrZXkgaXMgYWxzbyBwcmVzc2VkIHRoZW4gdGhlIHdvcmxkIGlzIHJvdGF0ZWRcclxuXHQgICAgICAgICAgICBpZiAoY3Vyc29ycy51cC5zaGlmdEtleSlcclxuXHQgICAgICAgICAgICB7XHJcblx0ICAgICAgICAgICAgICAgIC8vZ2FtZS53b3JsZC5yb3RhdGlvbiArPSAwLjA1O1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbHNlXHJcblx0ICAgICAgICAgICAge1xyXG5cdCAgICAgICAgICAgICAgICBpZihwbGF5ZXIueSA+IDM1MCkgcGxheWVyLnkgLT0gNDtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIGlmIChjdXJzb3JzLmRvd24uaXNEb3duKVxyXG5cdCAgICAgICAge1xyXG5cdCAgICAgICAgICAgIGlmIChjdXJzb3JzLmRvd24uc2hpZnRLZXkpXHJcblx0ICAgICAgICAgICAge1xyXG5cdCAgICAgICAgICAgICAgICAvL2dhbWUud29ybGQucm90YXRpb24gLT0gMC4wNTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgZWxzZVxyXG5cdCAgICAgICAgICAgIHtcclxuXHQgICAgICAgICAgICAgICAgcGxheWVyLnkgKz0gNDtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBpZiAoY3Vyc29ycy5sZWZ0LmlzRG93bilcclxuXHQgICAgICAgIHtcclxuXHQgICAgICAgICAgICBwbGF5ZXIueCAtPSA0O1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSBpZiAoY3Vyc29ycy5yaWdodC5pc0Rvd24pXHJcblx0ICAgICAgICB7XHJcblx0ICAgICAgICAgICBwbGF5ZXIueCArPSA0O1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgaWYgKGdhbWUuaW5wdXQua2V5Ym9hcmQuaXNEb3duKFBoYXNlci5LZXlib2FyZC5TUEFDRUJBUikpXHJcblx0ICAgICAgICB7XHJcblx0ICAgICAgICAgICAgZmlyZUJ1bGxldCgpIDtcclxuXHQgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvL0dBTUVQQUQgU1VQUE9SVFxyXG4gICAgICAgICAgICBpZiAoZ2FtZS5pbnB1dC5qb3lzdGlja0xlZnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1vdmUgdGhlIHVmbyB1c2luZyB0aGUgam95c3RpY2sncyBub3JtYWxpemVkWCBhbmQgWSB2YWx1ZXMsXHJcbiAgICAgICAgICAgICAgICAvLyB3aGljaCByYW5nZSBmcm9tIC0xIHRvIDEuXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuYm9keS52ZWxvY2l0eS5zZXRUbyhnYW1lLmlucHV0LmpveXN0aWNrTGVmdC5ub3JtYWxpemVkWCAqIDIwMCwgZ2FtZS5pbnB1dC5qb3lzdGlja0xlZnQubm9ybWFsaXplZFkgKiBwbGF5ZXJTcGVlZCAqIC0xKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5ib2R5LnZlbG9jaXR5LnNldFRvKDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcblx0XHR9XHJcblx0fVxyXG59IiwibW9kdWxlLmV4cG9ydHMgPSAgZnVuY3Rpb24gKCkge1xyXG4gXHJcbiAgICB0aGlzLmxvYWQuYXRsYXMoJ2J1bGxldHMnLCAnaW1nL2Fzc2V0cy9idWxsZXRzLnBuZycsICdzaGVldHMvYnVsbGV0cycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdibHVlX2J1bGxldCcsICdpbWcvYXNzZXRzL2JsdWUtYnVsbGV0LnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdiZycsICdpbWcvYmFja2dyb3VuZHMvYmcucG5nJyk7IFxyXG4gICAgdGhpcy5sb2FkLmF0bGFzKCdhdGxhcycsICdpbWcvZW5lbXktZmlnaHRlcnMvZW5lbXktZmlnaHRlcnMucG5nJywgJ3NoZWV0cy9lbmVteS1maWdodGVycycpO1xyXG4gICAgdGhpcy5sb2FkLmF0bGFzKCdib3NzZXMnLCAnaW1nL2VuZW15LWJvc3Nlcy9lbmVteS1ib3NzZXMucG5nJywgJ3NoZWV0cy9ib3NzZXMnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnc2hpcCcsICdpbWcvc3BhY2Vfc2hpcF9iYXNlLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdleHBsb2RlJywgJ2ltZy9hc3NldHMvZXhwbG9kZS5wbmcnLCAxMjgsIDEyOCk7XHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdleHBsb2RlLXNtYWxsJywgJ2ltZy9hc3NldHMvZXhwbG9kZS1zbWFsbC5wbmcnLCAzMiwgMzIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdleHBsb2RlLXNtYWxsZXN0JywgJ2ltZy9hc3NldHMvZXhwbG9kZS1zbWFsbGVzdC5wbmcnLCAxNiwgMTYpO1xyXG4gICAgdGhpcy5sb2FkLmF1ZGlvKCdib29tJywgWydhdWRpby9lZmZlY3RzL2V4cGxvZGUud2F2J10pO1xyXG4gICAgdGhpcy5sb2FkLmF1ZGlvKCdsYXplcicsIFsnYXVkaW8vZWZmZWN0cy9sYXplci53YXYnXSk7XHJcbiAgICB0aGlzLmxvYWQuYXVkaW8oJ3N0YWdlLTEnLCBbJ2F1ZGlvL2JhY2tncm91bmQvc3RhZ2UtMS5tcDMnLCAnYXVkaW8vYmFja2dyb3VuZC9zdGFnZS0xLm9nZyddKTtcclxuXHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9ICBmdW5jdGlvbiAoZ2FtZSkge1xyXG5cdHZhciByYXB0b3JzLG1pbmlCb3NzZXM7XHJcbiAgICB2YXIgc3Bhd24gPSBmdW5jdGlvbiAoKSB7IFxyXG5cclxuICAgICAgICB2YXIgeCA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKDQwLCA2MDApICAsIHkgPSBnYW1lLnJuZC5pbnRlZ2VySW5SYW5nZSgwLCAxMCk7XHJcbiAgICAgICAgdmFyIF9hbGllbiA9IGFsaWVucy5jcmVhdGUoeCwgeSwgJ2F0bGFzJywgJ2JhZC1ndXkxLnBuZycpO1xyXG4gICAgICAgIF9hbGllbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG4gXHJcbiAgICAgICAgX2FsaWVuLmJvZHkubW92ZXMgPSB0cnVlO1xyXG4gICAgICAgIF9hbGllbi5ib2R5LnZlbG9jaXR5LnNldFRvKDAsIDEwMCkgOyBcclxuICAgIH07XHJcblxyXG5cdHZhciBjb2xsaXNpb25IYW5kbGVyID0gZnVuY3Rpb24gIChidWxsZXQsIGFsaWVuKSB7XHJcblxyXG5cdCAgICBidWxsZXQua2lsbCgpO1xyXG5cdCAgICBhbGllbi5raWxsKCk7XHJcblx0ICAgIC8vd2luZG93LmJvb20ucGxheSgpO1xyXG5cdCAgICB2YXIgeCA9IGFsaWVuLmJvZHkueCwgeSA9YWxpZW4uYm9keS55XHJcblx0ICAgIHZhciBleHBsb3Npb24gPSBleHBsb3Npb25zLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcclxuXHQgICAgZXhwbG9zaW9uLnJlc2V0KGFsaWVuLmJvZHkueCwgYWxpZW4uYm9keS55KTtcclxuXHQgICAgZXhwbG9zaW9uLnBsYXkoJ2V4cGxvZGUnLCAzMCwgZmFsc2UsIHRydWUpO1xyXG5cdH07XHJcbiAgICB2YXIgYm9zc0NvbGxpc2lvbkhhbmRsZXIgPSBmdW5jdGlvbiAgKGJ1bGxldCwgYm9zcykge1xyXG5cclxuICAgICAgICBcclxuICAgICAgIC8vIHdpbmRvdy5ib29tLnBsYXkoKTtcclxuICAgICAgICB2YXIgeCA9IGJvc3MuYm9keS54LCB5ID1ib3NzLmJvZHkueTtcclxuICAgICAgICBjb25zb2xlLmxvZyhib3NzLmhpdENvdW50KVxyXG4gICAgICAgIGJvc3MuaGl0Q291bnQgPSBib3NzLmhpdENvdW50IC0gMTtcclxuICAgICAgICB2YXIgZXggPSBleHBsb3Npb25zU21hbGxlc3QuZ2V0Rmlyc3RFeGlzdHMoZmFsc2UpO1xyXG4gICAgICAgIGV4LnJlc2V0KGJ1bGxldC5ib2R5LngsIGJ1bGxldC5ib2R5LnkpO1xyXG4gICAgICAgIGJ1bGxldC5raWxsKCk7IFxyXG4gICAgICAgIGV4LnBsYXkoJ2V4cGxvZGUtc21hbGxlc3QnLCAzMCwgZmFsc2UsIHRydWUpOyBcclxuICAgICAgICBpZiAoYm9zcy5oaXRDb3VudCA8PSAwKXtcclxuICAgICAgICAgICAgdmFyIGV4cGxvc2lvbiA9IGV4cGxvc2lvbnMuZ2V0Rmlyc3RFeGlzdHMoZmFsc2UpO1xyXG4gICAgICAgICAgICBleHBsb3Npb24ucmVzZXQoYm9zcy5ib2R5LngsIGJvc3MuYm9keS55KTtcclxuICAgICAgICAgICAgZXhwbG9zaW9uLnBsYXkoJ2V4cGxvZGUnLCAzMCwgZmFsc2UsIHRydWUpOyBcclxuICAgICAgICAgICAgYm9zcy5raWxsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcbiAgICB2YXIgc3Bhd25SYXB0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcdHZhciB4ID0gZ2FtZS5ybmQuaW50ZWdlckluUmFuZ2UoNDAsIDYwMCkgICwgeSA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKDAsIDEwKTtcclxuICAgICAgICB2YXIgX2FsaWVuID0gcmFwdG9ycy5jcmVhdGUoeCwgeSwgJ2F0bGFzJywgJ3JhcHRvci0xLnBuZycpO1xyXG4gICAgICAgIF9hbGllbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG4gXHJcbiAgICAgICAgX2FsaWVuLmJvZHkubW92ZXMgPSB0cnVlO1xyXG4gICAgICAgIF9hbGllbi5ib2R5LnZlbG9jaXR5LnNldFRvKDAsIDE1MCkgOyBcclxuICAgIH1cclxuICAgIHZhciBzcGF3bk1pbmlCb3NzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB4ID0gZ2FtZS5ybmQuaW50ZWdlckluUmFuZ2UoNDAsIDYwMCkgICwgeSA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKDAsIDEwKTtcclxuICAgICAgICB2YXIgX2FsaWVuID0gbWluaUJvc3Nlcy5jcmVhdGUoeCwgeSwgJ2Jvc3NlcycsICdib3NzLTEucG5nJyk7XHJcbiAgICAgICAgX2FsaWVuLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcbiBcclxuICAgICAgICBfYWxpZW4uYm9keS5tb3ZlcyA9IHRydWU7XHJcbiAgICAgICAgX2FsaWVuLmJvZHkudmVsb2NpdHkuc2V0VG8oMCwgNzApIDsgXHJcbiAgICAgICAgX2FsaWVuLmhpdENvdW50ID0gNTtcclxuICAgIH1cclxuXHJcblx0dmFyIGVuZW15RmFjdG9yeTtcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0d2luZG93LmFsaWVucyA9IGdhbWUuYWRkLmdyb3VwKCk7XHJcbiAgICBcdFx0YWxpZW5zLmVuYWJsZUJvZHkgPSB0cnVlO1xyXG4gICAgXHRcdGFsaWVucy5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5BUkNBREU7XHJcbiAgICBcdFx0cmFwdG9ycyA9IGdhbWUuYWRkLmdyb3VwKCk7XHJcbiAgICBcdFx0cmFwdG9ycy5lbmFibGVCb2R5ID0gdHJ1ZTtcclxuICAgIFx0XHRyYXB0b3JzLnBoeXNpY3NCb2R5VHlwZSA9IFBoYXNlci5QaHlzaWNzLkFSQ0FERTtcclxuICAgICAgICAgICAgbWluaUJvc3NlcyA9IGdhbWUuYWRkLmdyb3VwKCk7XHJcbiAgICAgICAgICAgIG1pbmlCb3NzZXMuZW5hYmxlQm9keSA9IHRydWU7XHJcbiAgICAgICAgICAgIG1pbmlCb3NzZXMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuQVJDQURFO1xyXG5cdFx0ICAgIC8vbXVzaWMucGxheSgnJywgMCwgMSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2cobXVzaWMudm9sdW1lKTtcclxuICAgICAgICAgICAgLy9tdXNpYy52b2x1bWUgPSAwLjU7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2cobXVzaWMudm9sdW1lKTtcclxuICAgIFx0XHRnYW1lLnRpbWUuZXZlbnRzLnJlcGVhdChQaGFzZXIuVGltZXIuU0VDT05EICogMiwgMTA1LCBzcGF3biwgdGhpcyk7XHJcblxyXG4gICAgXHRcdGdhbWUudGltZS5ldmVudHMucmVwZWF0KFBoYXNlci5UaW1lci5TRUNPTkQgKiA1LCAyNSwgc3Bhd25SYXB0b3IsIHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgZ2FtZS50aW1lLmV2ZW50cy5yZXBlYXQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIDIsIDEwLCBzcGF3bk1pbmlCb3NzLCB0aGlzKTtcclxuXHRcdH0sXHJcblx0XHR1cGRhdGUgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdC8vZ2FtZSBsb29wIGZvciB0aGUgc3RhZ2VcclxuXHRcdFx0Z2FtZS5waHlzaWNzLmFyY2FkZS5vdmVybGFwKGJ1bGxldHMsIGFsaWVucywgY29sbGlzaW9uSGFuZGxlciwgbnVsbCwgdGhpcyk7XHJcblx0XHRcdGdhbWUucGh5c2ljcy5hcmNhZGUub3ZlcmxhcChidWxsZXRzLCByYXB0b3JzLCBjb2xsaXNpb25IYW5kbGVyLCBudWxsLCB0aGlzKTtcclxuICAgICAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS5vdmVybGFwKGJ1bGxldHMsIG1pbmlCb3NzZXMsIGJvc3NDb2xsaXNpb25IYW5kbGVyLCBudWxsLCB0aGlzKTtcclxuXHRcdH0sXHJcblx0XHRkZXN0cm95OiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0fVxyXG5cdH1cclxufSIsInZhciBidWxsZXRUaW1lID0gMDtcclxuIGZ1bmN0aW9uIHJlc2V0QnVsbGV0IChidWxsZXQpIHtcclxuXHJcbiAgICBidWxsZXQua2lsbCgpO1xyXG5cclxufTtcclxuXHJcbiBcclxuICAgIHZhciByaWdodF9idWxsZXRUaW1lID0gMCwgbGVmdF9idWxsZXRUaW1lID0gMDsgXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYnVsbGV0cyA9IHdpbmRvdy5idWxsZXRzO1xyXG5cclxuICAgIFxyXG4gICAgdmFyIGN1cnNvcnMgPSB3aW5kb3cuY3Vyc29yczsgXHJcblxyXG5cclxuXHJcbiAgICBwbGF5ZXIudXBkYXRlKCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhjdXJzb3JzKTtcclxuICAgICAgICBzdGFnZTEudXBkYXRlKCk7XHJcbiAgICAgICAgXHJcbn07XHJcbiJdfQ==
