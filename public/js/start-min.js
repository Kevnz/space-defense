(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var globals={bullets:null,enemies:null,player:null},update=require("./game/update"),preload=require("./game/preload"),create=require("./game/create"),game=window.game=new Phaser.Game(800,600,Phaser.AUTO,"",{preload:preload,create:create,update:update});
//# sourceMappingURL=out.js.map

},{"./game/create":2,"./game/preload":4,"./game/update":6}],2:[function(require,module,exports){
"use strict";function resetBullet(e){e.kill()}function setupEnemy(e){e.anchor.x=.5,e.anchor.y=.5,e.animations.add("explode")}module.exports=function(){game.physics.startSystem(Phaser.Physics.ARCADE),this.spaceBG=this.add.tileSprite(0,0,800,600,"bg"),this.spaceBG.autoScroll(0,75),window.player=require("./player")(game),player.init();var e=window.bullets=this.add.group();e.enableBody=!0,e.physicsBodyType=Phaser.Physics.ARCADE,e.createMultiple(10,"bullets","bullet-green.png"),e.setAll("anchor.x",.5),e.setAll("anchor.y",1),e.setAll("outOfBoundsKill",!0),e.setAll("checkWorldBounds",!0),window.explosions=game.add.group(),explosions.createMultiple(30,"explode"),explosions.forEach(setupEnemy,this),window.music=game.add.audio("stage-1"),window.boom=game.add.audio("boom"),window.lazer=game.add.audio("lazer"),window.stage1=require("./scenes/scene-1")(game),stage1.init()};
//# sourceMappingURL=out.js.map

},{"./player":3,"./scenes/scene-1":5}],3:[function(require,module,exports){
"use strict";module.exports=function(t){function e(){if(t.time.now>s){var e=bullets.getFirstExists(!1);e&&(e.reset(i.x,i.y+16),e.body.velocity.y=-300,s=t.time.now+1e3,lazer.play())}if(t.time.now>n+20){var o=bullets.getFirstExists(!1);o&&(o.reset(i.x+26,i.y+16),o.body.velocity.y=-300,n=t.time.now+1e3,lazer.play())}}var i,o,s=0,n=0,y=200;return{init:function(){i=t.add.sprite(384,500,"ship"),t.physics.enable(i,Phaser.Physics.ARCADE),o=t.input.keyboard.createCursorKeys()},update:function(){o.up.isDown?o.up.shiftKey||i.y>350&&(i.y-=4):o.down.isDown&&(o.down.shiftKey||(i.y+=4)),o.left.isDown?i.x-=4:o.right.isDown&&(i.x+=4),t.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&e(),t.input.joystickLeft?i.body.velocity.setTo(200*t.input.joystickLeft.normalizedX,t.input.joystickLeft.normalizedY*y*-1):i.body.velocity.setTo(0,0)}}};
//# sourceMappingURL=out.js.map

},{}],4:[function(require,module,exports){
"use strict";module.exports=function(){this.load.atlas("bullets","img/assets/bullets.png","img/assets/bullets.json"),this.load.image("blue_bullet","img/assets/blue-bullet.png"),this.load.image("bg","img/backgrounds/bg.png"),this.load.atlas("atlas","img/enemy-fighters/enemy-fighters.png","img/enemy-fighters/enemy-fighters.json"),this.load.image("ship","img/space_ship_base.png"),this.load.spritesheet("explode","img/assets/explode.png",128,128),this.load.audio("boom",["audio/effects/explode.wav"]),this.load.audio("lazer",["audio/effects/lazer.wav"]),this.load.audio("stage-1",["audio/background/stage-1.mp3","audio/background/stage-1.ogg"])};
//# sourceMappingURL=out.js.map

},{}],5:[function(require,module,exports){
"use strict";module.exports=function(e){var n,s=function(){var n=e.rnd.integerInRange(40,600),s=e.rnd.integerInRange(0,10),t=aliens.create(n,s,"atlas","bad-guy1.png");t.anchor.setTo(.5,.5),t.body.moves=!0,t.body.velocity.setTo(0,100)},t=function(e,n){e.kill(),n.kill(),window.boom.play();var s=(n.body.x,n.body.y,explosions.getFirstExists(!1));s.reset(n.body.x,n.body.y),s.play("explode",30,!1,!0)},o=function(){var s=e.rnd.integerInRange(40,600),t=e.rnd.integerInRange(0,10),o=n.create(s,t,"atlas","raptor-1.png");o.anchor.setTo(.5,.5),o.body.moves=!0,o.body.velocity.setTo(0,150)};return{init:function(){window.aliens=e.add.group(),aliens.enableBody=!0,aliens.physicsBodyType=Phaser.Physics.ARCADE,n=e.add.group(),n.enableBody=!0,n.physicsBodyType=Phaser.Physics.ARCADE,music.play("",0,1,!0),e.time.events.repeat(2*Phaser.Timer.SECOND,105,s,this),e.time.events.repeat(8*Phaser.Timer.SECOND,20,o,this)},update:function(){e.physics.arcade.overlap(bullets,aliens,t,null,this),e.physics.arcade.overlap(bullets,n,t,null,this)},destroy:function(){}}};
//# sourceMappingURL=out.js.map

},{}],6:[function(require,module,exports){
"use strict";function resetBullet(e){e.kill()}var bulletTime=0,right_bulletTime=0,left_bulletTime=0;module.exports=function(){window.bullets,window.cursors;player.update(),stage1.update()};
//# sourceMappingURL=out.js.map

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxccHVibGljXFxqc1xcZ2FtZS5qcyIsIkM6XFxVc2Vyc1xcS2V2aW5cXFByb2plY3RzXFxzcGFjZS1kZWZlbnNlXFxwdWJsaWNcXGpzXFxnYW1lXFxjcmVhdGUuanMiLCJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxccHVibGljXFxqc1xcZ2FtZVxccGxheWVyLmpzIiwiQzpcXFVzZXJzXFxLZXZpblxcUHJvamVjdHNcXHNwYWNlLWRlZmVuc2VcXHB1YmxpY1xcanNcXGdhbWVcXHByZWxvYWQuanMiLCJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxccHVibGljXFxqc1xcZ2FtZVxcc2NlbmVzXFxzY2VuZS0xLmpzIiwiQzpcXFVzZXJzXFxLZXZpblxcUHJvamVjdHNcXHNwYWNlLWRlZmVuc2VcXHB1YmxpY1xcanNcXGdhbWVcXHVwZGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLFlBQUksSUFBQSxVQUNBLFFBQVMsS0FDVCxRQUFTLEtBQ1QsT0FBUSxNQUVSLE9BQVMsUUFBUSxpQkFDakIsUUFBVSxRQUFRLGtCQUNsQixPQUFTLFFBQVEsaUJBRWpCLEtBQU8sT0FBTSxLQUFRLEdBQUksUUFBTSxLQUFNLElBQUssSUFBSyxPQUFNLEtBQU8sSUFBTSxRQUFTLFFBQVMsT0FBUSxPQUFRLE9BQVE7Ozs7QUNUL0cscUJBQVMsYUFBYSxHQUVuQixFQUFNLGVBSUQsWUFBWSxHQUVqQixFQUFLLE9BQU8sRUFBSyxHQUNqQixFQUFLLE9BQU8sRUFBSyxHQUNqQixFQUFL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LE9BQVEsRUFBa0IsS0FBTSxNQUNyRSxFQUFJLFFBQVEsT0FBTyxRQUFTLFFBQVMsRUFBUyxFQUFrQixLQUFNLE9BRXZFLFFBQVM7Ozs7QUNwRFgscUJBQ1UsYUFBYSxHQUVuQixFQUFNLE9BSE4sR0FBQSxZQUFhLEVBUVQsaUJBQW1CLEVBQUcsZ0JBQWtCLENBRWhELFFBQU0sUUFBWSxXQUNBLE9BQU0sUUFHTixPQUFNLE9BSXBCLFFBQU0sU0FFRixPQUFNIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgZ2xvYmFscyA9IHtcclxuICAgIGJ1bGxldHM6IG51bGwsXHJcbiAgICBlbmVtaWVzOiBudWxsLFxyXG4gICAgcGxheWVyOiBudWxsXHJcbn1cclxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoJy4vZ2FtZS91cGRhdGUnKTtcclxudmFyIHByZWxvYWQgPSByZXF1aXJlKCcuL2dhbWUvcHJlbG9hZCcpIDtcclxudmFyIGNyZWF0ZSA9IHJlcXVpcmUoJy4vZ2FtZS9jcmVhdGUnKTtcclxuIFxyXG52YXIgZ2FtZSA9IHdpbmRvdy5nYW1lID0gbmV3IFBoYXNlci5HYW1lKDgwMCwgNjAwLCBQaGFzZXIuQVVUTywgJycsIHsgcHJlbG9hZDogcHJlbG9hZCwgY3JlYXRlOiBjcmVhdGUsIHVwZGF0ZTogdXBkYXRlIH0pO1xyXG4iLCIgZnVuY3Rpb24gcmVzZXRCdWxsZXQgKGJ1bGxldCkge1xyXG5cclxuICAgIGJ1bGxldC5raWxsKCk7XHJcblxyXG59XHJcbjtcclxuZnVuY3Rpb24gc2V0dXBFbmVteSAoZW5lbXkpIHtcclxuXHJcbiAgICBlbmVteS5hbmNob3IueCA9IDAuNTtcclxuICAgIGVuZW15LmFuY2hvci55ID0gMC41O1xyXG4gICAgZW5lbXkuYW5pbWF0aW9ucy5hZGQoJ2V4cGxvZGUnKTtcclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICAgIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLkFSQ0FERSk7XHJcblxyXG4gICAgdGhpcy5zcGFjZUJHID0gIHRoaXMuYWRkLnRpbGVTcHJpdGUoMCwgMCwgODAwLCA2MDAsICdiZycpOyAgXHJcbiAgICB0aGlzLnNwYWNlQkcuYXV0b1Njcm9sbCgwLCA3NSk7IFxyXG5cclxuXHJcbiAgICB3aW5kb3cucGxheWVyID0gcmVxdWlyZSgnLi9wbGF5ZXInKShnYW1lKTtcclxuICAgIHBsYXllci5pbml0KCk7XHJcbiAgICB2YXIgYnVsbGV0cyA9IHdpbmRvdy5idWxsZXRzID0gdGhpcy5hZGQuZ3JvdXAoKTtcclxuXHJcbiAgICBidWxsZXRzLmVuYWJsZUJvZHkgPSB0cnVlO1xyXG5cclxuICAgIGJ1bGxldHMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuQVJDQURFO1xyXG5cclxuICAgIGJ1bGxldHMuY3JlYXRlTXVsdGlwbGUoMTAsICdidWxsZXRzJywgJ2J1bGxldC1ncmVlbi5wbmcnKTtcclxuICAgIGJ1bGxldHMuc2V0QWxsKCdhbmNob3IueCcsIDAuNSk7XHJcbiAgICBidWxsZXRzLnNldEFsbCgnYW5jaG9yLnknLCAxKTtcclxuICAgIGJ1bGxldHMuc2V0QWxsKCdvdXRPZkJvdW5kc0tpbGwnLCB0cnVlKTtcclxuICAgIGJ1bGxldHMuc2V0QWxsKCdjaGVja1dvcmxkQm91bmRzJywgdHJ1ZSk7XHJcblxyXG4gICAgXHJcblxyXG5cclxuICAgIHdpbmRvdy5leHBsb3Npb25zID0gZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICAgIGV4cGxvc2lvbnMuY3JlYXRlTXVsdGlwbGUoMzAsICdleHBsb2RlJyk7XHJcbiAgICBleHBsb3Npb25zLmZvckVhY2goc2V0dXBFbmVteSwgdGhpcyk7XHJcbiAgICB3aW5kb3cubXVzaWMgPSBnYW1lLmFkZC5hdWRpbygnc3RhZ2UtMScpO1xyXG4gICAgd2luZG93LmJvb20gPSBnYW1lLmFkZC5hdWRpbygnYm9vbScpO1xyXG4gICAgd2luZG93LmxhemVyID0gZ2FtZS5hZGQuYXVkaW8oJ2xhemVyJyk7XHJcblxyXG4gICAgXHJcbiAgICB3aW5kb3cuc3RhZ2UxID0gcmVxdWlyZSgnLi9zY2VuZXMvc2NlbmUtMScpKGdhbWUpO1xyXG4gICAgc3RhZ2UxLmluaXQoKTtcclxufVxyXG5cclxuICIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGdhbWUpIHtcclxuXHR2YXIgcGxheWVyLCBjdXJzb3JzO1xyXG5cdHZhciByaWdodF9idWxsZXRUaW1lID0gMCwgbGVmdF9idWxsZXRUaW1lID0gMDsgXHJcbiAgICB2YXIgcGxheWVyU3BlZWQgPSAyMDA7IC8vZHVubm9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmlyZUJ1bGxldCAoKSB7IFxyXG4gICAgICAgICAgICBpZiAoIGdhbWUudGltZS5ub3cgPiByaWdodF9idWxsZXRUaW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmlnaHRfYnVsbGV0ID0gYnVsbGV0cy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRfYnVsbGV0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICBBbmQgZmlyZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0X2J1bGxldC5yZXNldChwbGF5ZXIueCwgcGxheWVyLnkgKyAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRfYnVsbGV0LmJvZHkudmVsb2NpdHkueSA9IC0zMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRfYnVsbGV0VGltZSA9IGdhbWUudGltZS5ub3cgKyAxMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhemVyLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIGdhbWUudGltZS5ub3cgPiBsZWZ0X2J1bGxldFRpbWUgKyAyMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxlZnRfYnVsbGV0ID0gYnVsbGV0cy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVmdF9idWxsZXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIEFuZCBmaXJlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdF9idWxsZXQucmVzZXQocGxheWVyLnggKyAyNiwgcGxheWVyLnkgKyAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdF9idWxsZXQuYm9keS52ZWxvY2l0eS55ID0gLTMwMDtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0X2J1bGxldFRpbWUgPSBnYW1lLnRpbWUubm93ICsgMTAwMDtcclxuICAgICAgICAgICAgICAgICAgICBsYXplci5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRpbml0IDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRwbGF5ZXIgPSBnYW1lLmFkZC5zcHJpdGUoKDQwMCAtIDE2KSwgNTAwLCAnc2hpcCcpO1xyXG4gICAgXHRcdGdhbWUucGh5c2ljcy5lbmFibGUocGxheWVyLCBQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xyXG4gICAgXHRcdGN1cnNvcnMgPSAgZ2FtZS5pbnB1dC5rZXlib2FyZC5jcmVhdGVDdXJzb3JLZXlzKCk7XHJcblx0XHR9LFxyXG5cdFx0dXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vS0VZQk9BUkQgTU9WRU1FTlRcclxuXHQgICAgICAgIGlmIChjdXJzb3JzLnVwLmlzRG93bilcclxuXHQgICAgICAgIHtcclxuXHQgICAgICAgICAgICAvLyAgSWYgdGhlIHNoaWZ0IGtleSBpcyBhbHNvIHByZXNzZWQgdGhlbiB0aGUgd29ybGQgaXMgcm90YXRlZFxyXG5cdCAgICAgICAgICAgIGlmIChjdXJzb3JzLnVwLnNoaWZ0S2V5KVxyXG5cdCAgICAgICAgICAgIHtcclxuXHQgICAgICAgICAgICAgICAgLy9nYW1lLndvcmxkLnJvdGF0aW9uICs9IDAuMDU7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGVsc2VcclxuXHQgICAgICAgICAgICB7XHJcblx0ICAgICAgICAgICAgICAgIGlmKHBsYXllci55ID4gMzUwKSBwbGF5ZXIueSAtPSA0O1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2UgaWYgKGN1cnNvcnMuZG93bi5pc0Rvd24pXHJcblx0ICAgICAgICB7XHJcblx0ICAgICAgICAgICAgaWYgKGN1cnNvcnMuZG93bi5zaGlmdEtleSlcclxuXHQgICAgICAgICAgICB7XHJcblx0ICAgICAgICAgICAgICAgIC8vZ2FtZS53b3JsZC5yb3RhdGlvbiAtPSAwLjA1O1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbHNlXHJcblx0ICAgICAgICAgICAge1xyXG5cdCAgICAgICAgICAgICAgICBwbGF5ZXIueSArPSA0O1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmIChjdXJzb3JzLmxlZnQuaXNEb3duKVxyXG5cdCAgICAgICAge1xyXG5cdCAgICAgICAgICAgIHBsYXllci54IC09IDQ7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIGlmIChjdXJzb3JzLnJpZ2h0LmlzRG93bilcclxuXHQgICAgICAgIHtcclxuXHQgICAgICAgICAgIHBsYXllci54ICs9IDQ7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBpZiAoZ2FtZS5pbnB1dC5rZXlib2FyZC5pc0Rvd24oUGhhc2VyLktleWJvYXJkLlNQQUNFQkFSKSlcclxuXHQgICAgICAgIHtcclxuXHQgICAgICAgICAgICBmaXJlQnVsbGV0KCkgO1xyXG5cdCAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vR0FNRVBBRCBTVVBQT1JUXHJcbiAgICAgICAgICAgIGlmIChnYW1lLmlucHV0LmpveXN0aWNrTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTW92ZSB0aGUgdWZvIHVzaW5nIHRoZSBqb3lzdGljaydzIG5vcm1hbGl6ZWRYIGFuZCBZIHZhbHVlcyxcclxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIHJhbmdlIGZyb20gLTEgdG8gMS5cclxuICAgICAgICAgICAgICAgIHBsYXllci5ib2R5LnZlbG9jaXR5LnNldFRvKGdhbWUuaW5wdXQuam95c3RpY2tMZWZ0Lm5vcm1hbGl6ZWRYICogMjAwLCBnYW1lLmlucHV0LmpveXN0aWNrTGVmdC5ub3JtYWxpemVkWSAqIHBsYXllclNwZWVkICogLTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmJvZHkudmVsb2NpdHkuc2V0VG8oMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH1cclxuXHR9XHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9ICBmdW5jdGlvbiAoKSB7XHJcbiBcclxuICAgIHRoaXMubG9hZC5hdGxhcygnYnVsbGV0cycsICdpbWcvYXNzZXRzL2J1bGxldHMucG5nJywgJ2ltZy9hc3NldHMvYnVsbGV0cy5qc29uJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JsdWVfYnVsbGV0JywgJ2ltZy9hc3NldHMvYmx1ZS1idWxsZXQucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnJywgJ2ltZy9iYWNrZ3JvdW5kcy9iZy5wbmcnKTsgXHJcbiAgICB0aGlzLmxvYWQuYXRsYXMoJ2F0bGFzJywgJ2ltZy9lbmVteS1maWdodGVycy9lbmVteS1maWdodGVycy5wbmcnLCAnaW1nL2VuZW15LWZpZ2h0ZXJzL2VuZW15LWZpZ2h0ZXJzLmpzb24nKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnc2hpcCcsICdpbWcvc3BhY2Vfc2hpcF9iYXNlLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdleHBsb2RlJywgJ2ltZy9hc3NldHMvZXhwbG9kZS5wbmcnLCAxMjgsIDEyOCk7XHJcbiAgICB0aGlzLmxvYWQuYXVkaW8oJ2Jvb20nLCBbJ2F1ZGlvL2VmZmVjdHMvZXhwbG9kZS53YXYnXSk7XHJcbiAgICB0aGlzLmxvYWQuYXVkaW8oJ2xhemVyJywgWydhdWRpby9lZmZlY3RzL2xhemVyLndhdiddKTtcclxuICAgIHRoaXMubG9hZC5hdWRpbygnc3RhZ2UtMScsIFsnYXVkaW8vYmFja2dyb3VuZC9zdGFnZS0xLm1wMycsICdhdWRpby9iYWNrZ3JvdW5kL3N0YWdlLTEub2dnJ10pO1xyXG5cclxufSIsIm1vZHVsZS5leHBvcnRzID0gIGZ1bmN0aW9uIChnYW1lKSB7XHJcblx0dmFyIHJhcHRvcnM7XHJcbiAgICB2YXIgc3Bhd24gPSBmdW5jdGlvbiAoKSB7IFxyXG5cclxuICAgICAgICB2YXIgeCA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKDQwLCA2MDApICAsIHkgPSBnYW1lLnJuZC5pbnRlZ2VySW5SYW5nZSgwLCAxMCk7XHJcbiAgICAgICAgdmFyIF9hbGllbiA9IGFsaWVucy5jcmVhdGUoeCwgeSwgJ2F0bGFzJywgJ2JhZC1ndXkxLnBuZycpO1xyXG4gICAgICAgIF9hbGllbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG4gXHJcbiAgICAgICAgX2FsaWVuLmJvZHkubW92ZXMgPSB0cnVlO1xyXG4gICAgICAgIF9hbGllbi5ib2R5LnZlbG9jaXR5LnNldFRvKDAsIDEwMCkgOyBcclxuICAgIH07XHJcblxyXG5cdHZhciBjb2xsaXNpb25IYW5kbGVyID0gZnVuY3Rpb24gIChidWxsZXQsIGFsaWVuKSB7XHJcblxyXG5cdCAgICBidWxsZXQua2lsbCgpO1xyXG5cdCAgICBhbGllbi5raWxsKCk7XHJcblx0ICAgIHdpbmRvdy5ib29tLnBsYXkoKTtcclxuXHQgICAgdmFyIHggPSBhbGllbi5ib2R5LngsIHkgPWFsaWVuLmJvZHkueVxyXG5cdCAgICB2YXIgZXhwbG9zaW9uID0gZXhwbG9zaW9ucy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XHJcblx0ICAgIGV4cGxvc2lvbi5yZXNldChhbGllbi5ib2R5LngsIGFsaWVuLmJvZHkueSk7XHJcblx0ICAgIGV4cGxvc2lvbi5wbGF5KCdleHBsb2RlJywgMzAsIGZhbHNlLCB0cnVlKTtcclxuXHR9O1xyXG5cclxuICAgIHZhciBzcGF3blJhcHRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFx0dmFyIHggPSBnYW1lLnJuZC5pbnRlZ2VySW5SYW5nZSg0MCwgNjAwKSAgLCB5ID0gZ2FtZS5ybmQuaW50ZWdlckluUmFuZ2UoMCwgMTApO1xyXG4gICAgICAgIHZhciBfYWxpZW4gPSByYXB0b3JzLmNyZWF0ZSh4LCB5LCAnYXRsYXMnLCAncmFwdG9yLTEucG5nJyk7XHJcbiAgICAgICAgX2FsaWVuLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcbiBcclxuICAgICAgICBfYWxpZW4uYm9keS5tb3ZlcyA9IHRydWU7XHJcbiAgICAgICAgX2FsaWVuLmJvZHkudmVsb2NpdHkuc2V0VG8oMCwgMTUwKSA7IFxyXG4gICAgfVxyXG5cdHZhciBlbmVteUZhY3Rvcnk7XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHdpbmRvdy5hbGllbnMgPSBnYW1lLmFkZC5ncm91cCgpO1xyXG4gICAgXHRcdGFsaWVucy5lbmFibGVCb2R5ID0gdHJ1ZTtcclxuICAgIFx0XHRhbGllbnMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuQVJDQURFO1xyXG4gICAgXHRcdHJhcHRvcnMgPSBnYW1lLmFkZC5ncm91cCgpO1xyXG4gICAgXHRcdHJhcHRvcnMuZW5hYmxlQm9keSA9IHRydWU7XHJcbiAgICBcdFx0cmFwdG9ycy5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5BUkNBREU7XHJcblx0XHQgICAgbXVzaWMucGxheSgnJywgMCwgMSwgdHJ1ZSk7XHJcblxyXG4gICAgXHRcdGdhbWUudGltZS5ldmVudHMucmVwZWF0KFBoYXNlci5UaW1lci5TRUNPTkQgKiAyLCAxMDUsIHNwYXduLCB0aGlzKTtcclxuXHJcbiAgICBcdFx0Z2FtZS50aW1lLmV2ZW50cy5yZXBlYXQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIDgsIDIwLCBzcGF3blJhcHRvciwgdGhpcyk7XHJcblx0XHR9LFxyXG5cdFx0dXBkYXRlIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQvL2dhbWUgbG9vcCBmb3IgdGhlIHN0YWdlXHJcblx0XHRcdGdhbWUucGh5c2ljcy5hcmNhZGUub3ZlcmxhcChidWxsZXRzLCBhbGllbnMsIGNvbGxpc2lvbkhhbmRsZXIsIG51bGwsIHRoaXMpO1xyXG5cdFx0XHRnYW1lLnBoeXNpY3MuYXJjYWRlLm92ZXJsYXAoYnVsbGV0cywgcmFwdG9ycywgY29sbGlzaW9uSGFuZGxlciwgbnVsbCwgdGhpcyk7XHJcblx0XHR9LFxyXG5cdFx0ZGVzdHJveTogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdH1cclxuXHR9XHJcbn0iLCJ2YXIgYnVsbGV0VGltZSA9IDA7XHJcbiBmdW5jdGlvbiByZXNldEJ1bGxldCAoYnVsbGV0KSB7XHJcblxyXG4gICAgYnVsbGV0LmtpbGwoKTtcclxuXHJcbn07XHJcblxyXG4gXHJcbiAgICB2YXIgcmlnaHRfYnVsbGV0VGltZSA9IDAsIGxlZnRfYnVsbGV0VGltZSA9IDA7IFxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJ1bGxldHMgPSB3aW5kb3cuYnVsbGV0cztcclxuXHJcbiAgICBcclxuICAgIHZhciBjdXJzb3JzID0gd2luZG93LmN1cnNvcnM7IFxyXG5cclxuXHJcblxyXG4gICAgcGxheWVyLnVwZGF0ZSgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coY3Vyc29ycyk7XHJcbiAgICAgICAgc3RhZ2UxLnVwZGF0ZSgpO1xyXG4gICAgICAgIFxyXG59O1xyXG4iXX0=
