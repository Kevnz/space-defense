(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var globals={bullets:null,enemies:null,player:null},update=require("./game/update"),preload=require("./game/preload"),create=require("./game/create"),game=window.game=new Phaser.Game(800,600,Phaser.AUTO,"",{preload:preload,create:create,update:update});
//# sourceMappingURL=out.js.map

},{"./game/create":2,"./game/preload":3,"./game/update":4}],2:[function(require,module,exports){
"use strict";function resetBullet(e){e.kill()}function setupEnemy(e){e.anchor.x=.5,e.anchor.y=.5,e.animations.add("explode")}module.exports=function(){game.physics.startSystem(Phaser.Physics.ARCADE),this.spaceBG=this.add.tileSprite(0,0,800,600,"bg"),this.spaceBG.autoScroll(0,75);var e=window.ef=this.add.sprite(384,10,"atlas");e.frameName="bad-guy1.png",game.physics.enable(e,Phaser.Physics.ARCADE);var s=window.player=this.add.sprite(384,500,"ship");game.physics.enable(s,Phaser.Physics.ARCADE);var a=(window.cursors=this.input.keyboard.createCursorKeys(),window.bullets=this.add.group());a.enableBody=!0,a.physicsBodyType=Phaser.Physics.ARCADE,a.createMultiple(10,"bullets","bullet-green.png"),a.setAll("anchor.x",.5),a.setAll("anchor.y",1),a.setAll("outOfBoundsKill",!0),a.setAll("checkWorldBounds",!0),window.aliens=game.add.group(),aliens.enableBody=!0,aliens.physicsBodyType=Phaser.Physics.ARCADE,window.explosions=game.add.group(),explosions.createMultiple(30,"explode"),explosions.forEach(setupEnemy,this),window.music=game.add.audio("stage-1"),window.boom=game.add.audio("boom"),window.lazer=game.add.audio("lazer"),music.play("",0,1,!0);var i=function(){var e=game.rnd.integerInRange(40,600),s=game.rnd.integerInRange(40,300),a=aliens.create(e,s,"atlas","raptor-3-c.png");a.anchor.setTo(.5,.5),a.body.moves=!0,a.body.velocity.setTo(0,100)};game.time.events.repeat(2*Phaser.Timer.SECOND,25,i,this)};
//# sourceMappingURL=out.js.map

},{}],3:[function(require,module,exports){
"use strict";module.exports=function(){this.load.atlas("bullets","img/assets/bullets.png","img/assets/bullets.json"),this.load.image("blue_bullet","img/assets/blue-bullet.png"),this.load.image("bg","img/backgrounds/bg.png"),this.load.atlas("atlas","img/enemy-fighters/enemy-fighters.png","img/enemy-fighters/enemy-fighters.json"),this.load.image("ship","img/space_ship_base.png"),this.load.spritesheet("explode","img/assets/explode.png",128,128),this.load.audio("boom",["audio/effects/explode.wav"]),this.load.audio("lazer",["audio/effects/lazer.wav"]),this.load.audio("stage-1",["audio/background/stage-1.mp3","audio/background/stage-1.ogg"])};
//# sourceMappingURL=out.js.map

},{}],4:[function(require,module,exports){
"use strict";function resetBullet(e){e.kill()}function collisionHandler(e,l){e.kill(),l.kill(),window.boom.play();var i=(l.body.x,l.body.y,explosions.getFirstExists(!1));i.reset(l.body.x,l.body.y),i.play("explode",30,!1,!0)}var bulletTime=0,right_bulletTime=0,left_bulletTime=0;module.exports=function(){function e(){if(game.time.now>right_bulletTime){var e=l.getFirstExists(!1);e&&(e.reset(player.x,player.y+16),e.body.velocity.y=-300,right_bulletTime=game.time.now+1e3,lazer.play())}if(game.time.now>left_bulletTime+20){var i=l.getFirstExists(!1);i&&(i.reset(player.x+26,player.y+16),i.body.velocity.y=-300,left_bulletTime=game.time.now+1e3,lazer.play())}}var l=window.bullets,i=window.cursors;i.up.isDown?i.up.shiftKey||player.y>350&&(player.y-=4):i.down.isDown&&(i.down.shiftKey||(player.y+=4)),i.left.isDown?player.x-=4:i.right.isDown&&(player.x+=4),this.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&e(),game.physics.arcade.overlap(l,ef,collisionHandler,null,this),game.physics.arcade.overlap(l,aliens,collisionHandler,null,this)};
//# sourceMappingURL=out.js.map

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxccHVibGljXFxqc1xcZ2FtZS5qcyIsIkM6XFxVc2Vyc1xcS2V2aW5cXFByb2plY3RzXFxzcGFjZS1kZWZlbnNlXFxwdWJsaWNcXGpzXFxnYW1lXFxjcmVhdGUuanMiLCJDOlxcVXNlcnNcXEtldmluXFxQcm9qZWN0c1xcc3BhY2UtZGVmZW5zZVxccHVibGljXFxqc1xcZ2FtZVxccHJlbG9hZC5qcyIsIkM6XFxVc2Vyc1xcS2V2aW5cXFByb2plY3RzXFxzcGFjZS1kZWZlbnNlXFxwdWJsaWNcXGpzXFxnYW1lXFx1cGRhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxZQUFJLElBQUEsVUFDQSxRQUFTLEtBQ1QsUUFBUyxLQUNULE9BQVEsTUFFUixPQUFTLFFBQVEsaUJBQ2pCLFFBQVUsUUFBUSxrQkFDbEIsT0FBUyxRQUFRLGlCQUVqQixLQUFPLE9BQU0sS0FBUSxHQUFJLFFBQU0sS0FBTSxJQUFLLElBQUssT0FBTSxLQUFPLElBQU0sUUFBUyxRQUFTLE9BQVEsT0FBUSxPQUFROzs7O0FDVC9HLHFCQUFTLGFBQWEsR0FFbkIsRUFBTSxlQUlELFlBQVksR0FFakIsRUFBSyxPQUFPLEVBQUssR0FDakIsRUFBSyxPQUFPLEVBQUssR0FDakIsRUFBSyxXQUFXLElBQUssV0FJekIsT0FBTSxRQUFjLFdBRWhCLEtBQUksUUFBUSxZQUFhLE9BQU0sUUFBUSxRQUV2QyxLQUFJLFFBQVksS0FBSSxJQUFJLFdBQVksRUFBRyxFQUFHLElBQUssSUFBSyxNQUNwRCxLQUFJLFFBQVEsV0FBWSxFQUFHLEdBRTNCLElBQUksR0FBSyxPQUFN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OUIsZ0JBQWtCLEtBQUksS0FBSyxJQUFPLElBQ2xDLE1BQUssU0EzQnJCLEdBQUksR0FBVSxPQUFNLFFBR2hCLEVBQVUsT0FBTSxPQThCWixHQUFPLEdBQUcsT0FHTixFQUFPLEdBQUcsVUFNUCxPQUFNLEVBQUssTUFBSyxPQUFNLEdBQU0sR0FHOUIsRUFBTyxLQUFLLFNBRWIsRUFBTyxLQUFLLFdBTVosT0FBTSxHQUFNLElBR2hCLEVBQU8sS0FBSyxPQUVaLE9BQU0sR0FBTSxFQUVQLEVBQU8sTUFBTSxTQUVuQixPQUFNLEdBQU0sR0FFWCxLQUFJLE1BQU0sU0FBUyxPQUFRLE9BQU0sU0FBUyxXQUUxQyxJQUNILEtBRUksUUFBUSxPQUFPLFFBQVMsRUFBUyxHQUFJLGlCQUFrQixLQUFNLE1BQ2pFLEtBQUksUUFBUSxPQUFPLFFBQVMsRUFBUyxPQUFRLGlCQUFrQixLQUFNIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgZ2xvYmFscyA9IHtcclxuICAgIGJ1bGxldHM6IG51bGwsXHJcbiAgICBlbmVtaWVzOiBudWxsLFxyXG4gICAgcGxheWVyOiBudWxsXHJcbn1cclxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoJy4vZ2FtZS91cGRhdGUnKTtcclxudmFyIHByZWxvYWQgPSByZXF1aXJlKCcuL2dhbWUvcHJlbG9hZCcpIDtcclxudmFyIGNyZWF0ZSA9IHJlcXVpcmUoJy4vZ2FtZS9jcmVhdGUnKTtcclxuIFxyXG52YXIgZ2FtZSA9IHdpbmRvdy5nYW1lID0gbmV3IFBoYXNlci5HYW1lKDgwMCwgNjAwLCBQaGFzZXIuQVVUTywgJycsIHsgcHJlbG9hZDogcHJlbG9hZCwgY3JlYXRlOiBjcmVhdGUsIHVwZGF0ZTogdXBkYXRlIH0pO1xyXG4iLCIgZnVuY3Rpb24gcmVzZXRCdWxsZXQgKGJ1bGxldCkge1xyXG5cclxuICAgIGJ1bGxldC5raWxsKCk7XHJcblxyXG59XHJcbjtcclxuZnVuY3Rpb24gc2V0dXBFbmVteSAoZW5lbXkpIHtcclxuXHJcbiAgICBlbmVteS5hbmNob3IueCA9IDAuNTtcclxuICAgIGVuZW15LmFuY2hvci55ID0gMC41O1xyXG4gICAgZW5lbXkuYW5pbWF0aW9ucy5hZGQoJ2V4cGxvZGUnKTtcclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICAgIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLkFSQ0FERSk7XHJcblxyXG4gICAgdGhpcy5zcGFjZUJHID0gIHRoaXMuYWRkLnRpbGVTcHJpdGUoMCwgMCwgODAwLCA2MDAsICdiZycpOyAgXHJcbiAgICB0aGlzLnNwYWNlQkcuYXV0b1Njcm9sbCgwLCA3NSk7IFxyXG5cclxuICAgIHZhciBlZiA9IHdpbmRvdy5lZiA9IHRoaXMuYWRkLnNwcml0ZSgoNDAwIC0gMTYpLCAxMCwgJ2F0bGFzJyk7XHJcbiAgICBlZi5mcmFtZU5hbWUgPSBcImJhZC1ndXkxLnBuZ1wiO1xyXG4gICAgY29uc29sZS5sb2coZWYpO1xyXG4gICAgZ2FtZS5waHlzaWNzLmVuYWJsZShlZiwgUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcclxuICAgIHZhciBwbGF5ZXIgPSB3aW5kb3cucGxheWVyID0gdGhpcy5hZGQuc3ByaXRlKCg0MDAgLSAxNiksIDUwMCwgJ3NoaXAnKTtcclxuICAgIGdhbWUucGh5c2ljcy5lbmFibGUocGxheWVyLCBQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xyXG4gICAgdmFyIGN1cnNvcnMgPSB3aW5kb3cuY3Vyc29ycyA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xyXG5cclxuICAgIHZhciBidWxsZXRzID0gd2luZG93LmJ1bGxldHMgPSB0aGlzLmFkZC5ncm91cCgpO1xyXG5cclxuICAgIGJ1bGxldHMuZW5hYmxlQm9keSA9IHRydWU7XHJcblxyXG4gICAgYnVsbGV0cy5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5BUkNBREU7XHJcblxyXG4gICAgYnVsbGV0cy5jcmVhdGVNdWx0aXBsZSgxMCwgJ2J1bGxldHMnLCAnYnVsbGV0LWdyZWVuLnBuZycpO1xyXG4gICAgYnVsbGV0cy5zZXRBbGwoJ2FuY2hvci54JywgMC41KTtcclxuICAgIGJ1bGxldHMuc2V0QWxsKCdhbmNob3IueScsIDEpO1xyXG4gICAgYnVsbGV0cy5zZXRBbGwoJ291dE9mQm91bmRzS2lsbCcsIHRydWUpO1xyXG4gICAgYnVsbGV0cy5zZXRBbGwoJ2NoZWNrV29ybGRCb3VuZHMnLCB0cnVlKTtcclxuXHJcbiAgICB3aW5kb3cuYWxpZW5zID0gZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICAgIGFsaWVucy5lbmFibGVCb2R5ID0gdHJ1ZTtcclxuICAgIGFsaWVucy5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5BUkNBREU7XHJcblxyXG4gICAgd2luZG93LmV4cGxvc2lvbnMgPSBnYW1lLmFkZC5ncm91cCgpO1xyXG4gICAgZXhwbG9zaW9ucy5jcmVhdGVNdWx0aXBsZSgzMCwgJ2V4cGxvZGUnKTtcclxuICAgIGV4cGxvc2lvbnMuZm9yRWFjaChzZXR1cEVuZW15LCB0aGlzKTtcclxuICAgIHdpbmRvdy5tdXNpYyA9IGdhbWUuYWRkLmF1ZGlvKCdzdGFnZS0xJyk7XHJcbiAgICB3aW5kb3cuYm9vbSA9IGdhbWUuYWRkLmF1ZGlvKCdib29tJyk7XHJcbiAgICB3aW5kb3cubGF6ZXIgPSBnYW1lLmFkZC5hdWRpbygnbGF6ZXInKTtcclxuXHJcbiAgICBcclxuICAgIG11c2ljLnBsYXkoJycsMCwxLHRydWUpO1xyXG4gICAgdmFyIHNwYXduID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzcGF3bicpO1xyXG4gICAgICAgIHZhciB4ID0gZ2FtZS5ybmQuaW50ZWdlckluUmFuZ2UoNDAsIDYwMCkgICwgeSA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKDQwLCAzMDApO1xyXG4gICAgICAgIHZhciBfYWxpZW4gPSBhbGllbnMuY3JlYXRlKHgsIHksICdhdGxhcycsICdyYXB0b3ItMy1jLnBuZycpO1xyXG4gICAgICAgIF9hbGllbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG4gXHJcbiAgICAgICAgX2FsaWVuLmJvZHkubW92ZXMgPSB0cnVlO1xyXG4gICAgICAgIF9hbGllbi5ib2R5LnZlbG9jaXR5LnNldFRvKDAsIDEwMCkgOyBcclxuICAgIH07XHJcbiAgICBnYW1lLnRpbWUuZXZlbnRzLnJlcGVhdChQaGFzZXIuVGltZXIuU0VDT05EICogMiwgMjUsIHNwYXduLCB0aGlzKTtcclxufVxyXG5cclxuICIsIm1vZHVsZS5leHBvcnRzID0gIGZ1bmN0aW9uICgpIHtcclxuIFxyXG4gICAgdGhpcy5sb2FkLmF0bGFzKCdidWxsZXRzJywgJ2ltZy9hc3NldHMvYnVsbGV0cy5wbmcnLCAnaW1nL2Fzc2V0cy9idWxsZXRzLmpzb24nKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYmx1ZV9idWxsZXQnLCAnaW1nL2Fzc2V0cy9ibHVlLWJ1bGxldC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYmcnLCAnaW1nL2JhY2tncm91bmRzL2JnLnBuZycpOyBcclxuICAgIHRoaXMubG9hZC5hdGxhcygnYXRsYXMnLCAnaW1nL2VuZW15LWZpZ2h0ZXJzL2VuZW15LWZpZ2h0ZXJzLnBuZycsICdpbWcvZW5lbXktZmlnaHRlcnMvZW5lbXktZmlnaHRlcnMuanNvbicpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdzaGlwJywgJ2ltZy9zcGFjZV9zaGlwX2Jhc2UucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoJ2V4cGxvZGUnLCAnaW1nL2Fzc2V0cy9leHBsb2RlLnBuZycsIDEyOCwgMTI4KTtcclxuICAgIHRoaXMubG9hZC5hdWRpbygnYm9vbScsIFsnYXVkaW8vZWZmZWN0cy9leHBsb2RlLndhdiddKTtcclxuICAgIHRoaXMubG9hZC5hdWRpbygnbGF6ZXInLCBbJ2F1ZGlvL2VmZmVjdHMvbGF6ZXIud2F2J10pO1xyXG4gICAgdGhpcy5sb2FkLmF1ZGlvKCdzdGFnZS0xJywgWydhdWRpby9iYWNrZ3JvdW5kL3N0YWdlLTEubXAzJywgJ2F1ZGlvL2JhY2tncm91bmQvc3RhZ2UtMS5vZ2cnXSk7XHJcbn0iLCJ2YXIgYnVsbGV0VGltZSA9IDA7XHJcbiBmdW5jdGlvbiByZXNldEJ1bGxldCAoYnVsbGV0KSB7XHJcblxyXG4gICAgYnVsbGV0LmtpbGwoKTtcclxuXHJcbn07XHJcblxyXG5mdW5jdGlvbiBjb2xsaXNpb25IYW5kbGVyIChidWxsZXQsIGFsaWVuKSB7XHJcbmNvbnNvbGUubG9nKGFyZ3VtZW50cyk7XHJcbiAgICAvLyAgV2hlbiBhIGJ1bGxldCBoaXRzIGFuIGFsaWVuIHdlIGtpbGwgdGhlbSBib3RoXHJcbiAgICBidWxsZXQua2lsbCgpO1xyXG4gICAgYWxpZW4ua2lsbCgpO1xyXG4gICAgd2luZG93LmJvb20ucGxheSgpO1xyXG52YXIgeCA9IGFsaWVuLmJvZHkueCwgeSA9YWxpZW4uYm9keS55XHJcbiAgICB2YXIgZXhwbG9zaW9uID0gZXhwbG9zaW9ucy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XHJcbiAgICBleHBsb3Npb24ucmVzZXQoYWxpZW4uYm9keS54LCBhbGllbi5ib2R5LnkpO1xyXG4gICAgZXhwbG9zaW9uLnBsYXkoJ2V4cGxvZGUnLCAzMCwgZmFsc2UsIHRydWUpO1xyXG4gICAgLy8gIEluY3JlYXNlIHRoZSBzY29yZVxyXG4gICAvLyBzY29yZSArPSAyMDtcclxuICAgIC8vc2NvcmVUZXh0LnRleHQgPSBzY29yZVN0cmluZyArIHNjb3JlO1xyXG5cclxuICAgIC8vICBBbmQgY3JlYXRlIGFuIGV4cGxvc2lvbiA6KVxyXG4gICAgLy92YXIgZXhwbG9zaW9uID0gZXhwbG9zaW9ucy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XHJcbiAgICAvL2V4cGxvc2lvbi5yZXNldChhbGllbi5ib2R5LngsIGFsaWVuLmJvZHkueSk7XHJcbiAgICAvL2V4cGxvc2lvbi5wbGF5KCdrYWJvb20nLCAzMCwgZmFsc2UsIHRydWUpO1xyXG5cclxuICAgIC8vaWYgKGFsaWVucy5jb3VudExpdmluZygpID09IDApXHJcbiAgICAvL3tcclxuICAgICAgIC8vIHNjb3JlICs9IDEwMDA7XHJcbiAgICAgIC8vICBzY29yZVRleHQudGV4dCA9IHNjb3JlU3RyaW5nICsgc2NvcmU7XHJcblxyXG4gICAgICAgLy8gZW5lbXlCdWxsZXRzLmNhbGxBbGwoJ2tpbGwnLHRoaXMpO1xyXG4gICAgICAgLy8gc3RhdGVUZXh0LnRleHQgPSBcIiBZb3UgV29uLCBcXG4gQ2xpY2sgdG8gcmVzdGFydFwiO1xyXG4gICAgICAgLy8gc3RhdGVUZXh0LnZpc2libGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvL3RoZSBcImNsaWNrIHRvIHJlc3RhcnRcIiBoYW5kbGVyXHJcbiAgICAgIC8vICBnYW1lLmlucHV0Lm9uVGFwLmFkZE9uY2UocmVzdGFydCx0aGlzKTtcclxuICAgIC8vfVxyXG5cclxuICAgIC8vZ2FtZS5hZGQuc3ByaXRlKCg0MDAgLSAxNiksIDEwLCAnYXRsYXMnKTtcclxuICAgIC8vZWYuZnJhbWVOYW1lID0gXCJiYWQtZ3V5MS5wbmdcIjtcclxufTsgXHJcbiB2YXIgcmlnaHRfYnVsbGV0VGltZSA9IDAsIGxlZnRfYnVsbGV0VGltZSA9IDA7IFxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJ1bGxldHMgPSB3aW5kb3cuYnVsbGV0cztcclxuXHJcbiAgICBcclxuICAgIHZhciBjdXJzb3JzID0gd2luZG93LmN1cnNvcnM7IFxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaXJlQnVsbGV0ICgpIHsgXHJcbiAgICAgICAgICAgIGlmICggZ2FtZS50aW1lLm5vdyA+IHJpZ2h0X2J1bGxldFRpbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByaWdodF9idWxsZXQgPSBidWxsZXRzLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChyaWdodF9idWxsZXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIEFuZCBmaXJlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRfYnVsbGV0LnJlc2V0KHBsYXllci54LCBwbGF5ZXIueSArIDE2KTtcclxuICAgICAgICAgICAgICAgICAgICByaWdodF9idWxsZXQuYm9keS52ZWxvY2l0eS55ID0gLTMwMDtcclxuICAgICAgICAgICAgICAgICAgICByaWdodF9idWxsZXRUaW1lID0gZ2FtZS50aW1lLm5vdyArIDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF6ZXIucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggZ2FtZS50aW1lLm5vdyA+IGxlZnRfYnVsbGV0VGltZSArIDIwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVmdF9idWxsZXQgPSBidWxsZXRzLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZWZ0X2J1bGxldClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgQW5kIGZpcmUgaXRcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0X2J1bGxldC5yZXNldChwbGF5ZXIueCArIDI2LCBwbGF5ZXIueSArIDE2KTtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0X2J1bGxldC5ib2R5LnZlbG9jaXR5LnkgPSAtMzAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRfYnVsbGV0VGltZSA9IGdhbWUudGltZS5ub3cgKyAxMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhemVyLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gIEZvciBleGFtcGxlIHRoaXMgY2hlY2tzIGlmIHRoZSB1cCBvciBkb3duIGtleXMgYXJlIHByZXNzZWQgYW5kIG1vdmVzIHRoZSBjYW1lcmEgYWNjb3JkaW5nbHkuXHJcbiAgICAgICAgaWYgKGN1cnNvcnMudXAuaXNEb3duKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gIElmIHRoZSBzaGlmdCBrZXkgaXMgYWxzbyBwcmVzc2VkIHRoZW4gdGhlIHdvcmxkIGlzIHJvdGF0ZWRcclxuICAgICAgICAgICAgaWYgKGN1cnNvcnMudXAuc2hpZnRLZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vZ2FtZS53b3JsZC5yb3RhdGlvbiArPSAwLjA1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYocGxheWVyLnkgPiAzNTApIHBsYXllci55IC09IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY3Vyc29ycy5kb3duLmlzRG93bilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjdXJzb3JzLmRvd24uc2hpZnRLZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vZ2FtZS53b3JsZC5yb3RhdGlvbiAtPSAwLjA1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnkgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3Vyc29ycy5sZWZ0LmlzRG93bilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBsYXllci54IC09IDQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGN1cnNvcnMucmlnaHQuaXNEb3duKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICBwbGF5ZXIueCArPSA0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pbnB1dC5rZXlib2FyZC5pc0Rvd24oUGhhc2VyLktleWJvYXJkLlNQQUNFQkFSKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpcmVCdWxsZXQoKSA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coY3Vyc29ycyk7XHJcbiAgICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUub3ZlcmxhcChidWxsZXRzLCBlZiwgY29sbGlzaW9uSGFuZGxlciwgbnVsbCwgdGhpcyk7XHJcbiAgICAgICAgIGdhbWUucGh5c2ljcy5hcmNhZGUub3ZlcmxhcChidWxsZXRzLCBhbGllbnMsIGNvbGxpc2lvbkhhbmRsZXIsIG51bGwsIHRoaXMpO1xyXG59O1xyXG4iXX0=
